{
  "log" : {
    "version" : "1.2",
    "pages" : [ ],
    "entries" : [ {
      "startedDateTime" : "2019-09-10T06:03:07.022Z",
      "request" : {
        "method" : "GET",
        "url" : "https://testing.adeptforms.com/js/main/helper/helper.js?v=1568095372",
        "httpVersion" : "",
        "cookies" : [ ],
        "headers" : [ ],
        "queryString" : [ {
          "name" : "v",
          "value" : "1568095372"
        } ],
        "headersSize" : 0,
        "bodySize" : 0,
        "comment" : ""
      },
      "response" : {
        "status" : 200,
        "statusText" : "",
        "httpVersion" : "",
        "cookies" : [ ],
        "headers" : [ {
          "name" : "Keep-Alive",
          "value" : "timeout=5, max=100"
        }, {
          "name" : "Accept-Ranges",
          "value" : "bytes"
        }, {
          "name" : null,
          "value" : "HTTP/1.1 200 OK"
        }, {
          "name" : "Server",
          "value" : "Apache/2.4.18 (Ubuntu)"
        }, {
          "name" : "ETag",
          "value" : "\"30898-5919e9706f2af;5922a6a2570ae\""
        }, {
          "name" : "Connection",
          "value" : "Keep-Alive"
        }, {
          "name" : "Vary",
          "value" : "Accept-Encoding"
        }, {
          "name" : "Last-Modified",
          "value" : "Tue, 03 Sep 2019 04:33:28 GMT"
        }, {
          "name" : "Content-Length",
          "value" : "198808"
        }, {
          "name" : "Date",
          "value" : "Tue, 10 Sep 2019 06:03:07 GMT"
        }, {
          "name" : "Content-Type",
          "value" : "application/javascript"
        } ],
        "content" : {
          "size" : 198808,
          "mimeType" : "application/javascript",
          "text" : "function actionButton(isEdit, isArchive, isShare) {\r\n\r\n    var html = \"\";\r\n    if (isShare) html += '<a href=\"#\" title=\"share\" class=\"label bg-green shareButton\"><i class=\"icon-share3\" style=\"font-size: 10px;\"></i></a>&nbsp;&nbsp;';\r\n    if (isEdit) html += '<a href=\"#\" id=\"editButton\" title=\"edit\" class=\"label bg-teal\"><i class=\"icon-pencil3\" style=\"font-size: 10px;\"></i></a>&nbsp;&nbsp;';\r\n    if (isArchive) html += '<a href=\"#\" id=\"delButton\" title=\"delete\" class=\"label bg-pink\"><i class=\"icon-cross\" style=\"font-size: 10px;\"></i></a>';\r\n    else\r\n        html += '<a href=\"#\" id=\"activateButton\" title=\"Activate\" class=\"label bg-green\"><i class=\"icon-checkmark4\" style=\"font-size: 10px;\"></i></a>';\r\n\r\n    return html;\r\n}\r\n\r\nfunction singleButton(isActive, title) {\r\n    var html = \"\";\r\n    if (isActive) html += '<a href=\"#\" id=\"#\" title=\"' + title + '\" class=\"label bg-slate btn-action\"><i class=\"icon-minus2\" style=\"font-size: 10px;\"></i></a>';\r\n    else\r\n        html += '<a href=\"#\" id=\"singleButton\" title=\"' + title + '\" class=\"label bg-green btn-action single-button\"><i class=\"icon-checkmark4\" style=\"font-size: 10px;\"></i></a>';\r\n\r\n    return html;\r\n}\r\n\r\nfunction locationButton(ip) {\r\n    var html = \"\";\r\n    html += '<a href=\"#\" id=\"locButton\" title=\"Location\" class=\"label border-danger text-danger\" data-ip=\"' + ip + '\" data-toggle=\"modal\" data-target=\"#iplocation_modal\" style=\"text-transform: lowercase\"><i class=\"icon-location3\" style=\"font-size: 10px;\"></i> Location</a>';\r\n    return html;\r\n}\r\n\r\n\r\nfunction throttle(callback, wait = 100) {\r\n    var time = Date.now();\r\n    return function () {\r\n        if ((time + wait - Date.now()) < 0) {\r\n            callback && callback();\r\n            time = Date.now();\r\n        }\r\n    }\r\n}\r\n\r\nfunction isExist(source) {\r\n    let result = false;\r\n    if (source) {\r\n        if (typeof source == 'object') {\r\n            result = Object.keys(source).length ? true : false;\r\n        }\r\n        else if (typeof source == 'array' || Array.isArray(source)) {\r\n            result = source.length ? true : false;\r\n        }\r\n        else {\r\n            result = source ? true : false;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n\r\nfunction isFalse(data) {\r\n    return !data;\r\n}\r\n\r\nfunction isTrue(data) {\r\n    return data && data === true;\r\n}\r\n\r\nfunction arrayLength(array = []) {\r\n    let source = Array.isArray(array) ? array : [],\r\n        result = parseInt(source.length);\r\n\r\n    return result;\r\n}\r\n\r\nfunction returnArray(array = []) {\r\n    let source = Array.isArray(array) ? array : [];\r\n    return source;\r\n}\r\n\r\nfunction timestampToReadableDate(date, dateFormat = 'DD/MM/YYYY') {\r\n    let format = dateFormat || 'DD/MM/YYYY',\r\n        source = date ? returnDate(date) : '',\r\n        result = source ? moment(source, 'x').format(format) : '';\r\n\r\n    return result;\r\n}\r\n\r\nfunction shortenText(text=\"\", length=30, addDots=true) {\r\n    let source = (text || '').trim(),\r\n        result = '',\r\n        dots = addDots ? '...' : '';\r\n\r\n    if (source.length > length) {\r\n        result = (source.substring(0, length)).trim() + dots;\r\n    }\r\n    else {\r\n        result = source;\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction stopLaddaOnTimeout(timeout = 500) {\r\n    setTimeout(() => {\r\n        Ladda.stopAll();\r\n        removeLaddaFromButton();\r\n    }, timeout);\r\n}\r\n\r\nfunction loadJson(path=\"\") {\r\n    let result = []; \r\n    let promise = new Promise((resolve, reject)=> {\r\n       if(path) {\r\n            try {\r\n                $.getJSON(url(path), function(data) {\r\n                    result = data; \r\n                    resolve(result); \r\n                });\r\n            }\r\n            catch(e) {\r\n                reject('Failed to load JSON file')\r\n            }\r\n       }\r\n       else {\r\n            reject('Please provide the path to JSON file'); \r\n       }\r\n    })\r\n\r\n    return promise; \r\n}\r\n\r\nfunction loadJsonWithCallback(path=\"\", callback) {\r\n    if(path) {\r\n        loadJson(path)\r\n            .then((response)=> {\r\n                if(response) {\r\n                    callback && callback(response); \r\n                }\r\n                else {\r\n                    callback && callback(false); \r\n                }\r\n            })\r\n            .catch((error)=> {\r\n                console.error(error); \r\n                callback && callback(false); \r\n            });\r\n    }\r\n    else {\r\n        callback && callback(false); \r\n    }\r\n}\r\n\r\nfunction loadMultipleJsonWithCallback(paths=[], callback) {\r\n    if(Array.isArray(paths) && paths.length) {\r\n        let promises = paths.map((path)=> {\r\n            return loadJson(path); \r\n        });\r\n\r\n        Promise.all(promises).then((responses)=> {\r\n            callback && callback(responses); \r\n        })\r\n        .catch((error)=> {\r\n            console.log(error); \r\n            callback && callback(false);\r\n        })\r\n    }\r\n    else {\r\n        callback && callback(false);\r\n    }\r\n}\r\n\r\nfunction returnSelectOptions(options = [], capitalizeText = false) {\r\n    let source = options || [];\r\n    let result = [];\r\n    if (Array.isArray(source)) {\r\n        result = source.filter((item) => typeof item == 'object' && item)\r\n            .filter((item) => (Object.keys(item) || []).length)\r\n            .map((item) => {\r\n                item.text = capitalizeText ? capitalize(item.text) : item.text;\r\n                return item;\r\n            });\r\n        result = result || [];\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction returnDate(dateObject) {\r\n    let result = '';\r\n    if(dateObject) {\r\n        if (typeof dateObject == 'object') {\r\n            result = dateObject.$date ? dateObject.$date.$numberLong ? dateObject.$date.$numberLong : '' : '';\r\n        }\r\n        else if (typeof dateObject == 'string') {\r\n            result = dateObject;\r\n        }\r\n        else {\r\n            result = dateObject;\r\n        }\r\n    }\r\n    return parseInt(result);\r\n}\r\n\r\n//=========================== Start of specially made helpers for CDG project\r\n\r\nfunction cdgLabelColor (data) {\r\n    switch (data) {\r\n        case 'new':\r\n            return 'bg-primary-600'\r\n            break;\r\n        case 'approved':\r\n            return 'bg-success-600'\r\n            break;\r\n        case 'verified':\r\n            return 'bg-slate-600'\r\n            break;\r\n        case 'inProgress':\r\n            return 'bg-purple-600'\r\n            break;\r\n        case 'diagnosed':\r\n            return 'bg-teal-600'\r\n            break;\r\n        case 'pending':\r\n            return 'bg-danger-400'\r\n            break;\r\n        default:\r\n            return 'bg-orange-600'\r\n            break;\r\n    }\r\n}\r\n\r\nfunction cdgSubscribe(eventBus, subscribeOptions, callback) {\r\n    let options = {\r\n        publisher: \"socketEvent\",\r\n        eventName: \"new_private_notif\",\r\n        subscriberId: \"\",\r\n        target: \"ticketDetail\",\r\n        additionalCheck: {\r\n            ticketID: \"\"\r\n        }\r\n    };\r\n\r\n    let subscription = ({...options, ...subscribeOptions});\r\n\r\n\r\n    if(eventBus) {\r\n\r\n        let eventSubscription = eventBus.subscribe(subscription.publisher, \r\n            (event)=> {  \r\n\r\n                event.message = event.message || {};\r\n\r\n                let additionalCheckScopes = ['ticketDetail', 'adminTicketDetail', 'specialistTicketDetail'];\r\n                let additionalCheck = additionalCheckScopes.includes(subscription.target) ? (\r\n                        subscription.additionalCheck.ticketID == (event.message.ticketID || event.message.ticketId)\r\n                    ) : true;\r\n\r\n                if(event.name == subscription.eventName) {\r\n                    \r\n                    let userId = event.message.toId || event.message.receiverID || '';\r\n                    if ( userId == subscription.subscriberId && \r\n                        event.message.target.includes(subscription.target) && \r\n                        additionalCheck) {\r\n                        callback && callback();                       \r\n                    } \r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nfunction mapCDGSubmitImages(source) {\r\n    let imageSource = source || [];\r\n    const dummy = false;\r\n    let result = [];\r\n    if (Array.isArray(imageSource)) {\r\n        result = (imageSource || []).map((image, index) => {\r\n            let dummyLink = 'https://picsum.photos/200/' + index + '00.jpg?random=' + index;\r\n            return {\r\n                id: index,\r\n                key: index,\r\n                label: shortenText(image.filename) + ' ' + formatBytes(image.size),\r\n                source: returnObjectChildren(image, 'upload') || (dummy ? dummyLink : '')\r\n            }\r\n        }).filter((image) => !!(image.source));\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction generateCDGDownloadLinkFromObject(downloadData={}, fileName=\"\", includeDate=true) {\r\n    let invoice = downloadData || {},\r\n        invoiceUrl = (invoice.upload ? invoice.upload : '') || '',\r\n        invoiceName = (invoice.filename ? invoice.filename : '') || '-',\r\n        invoiceSize = invoiceName? (invoice.size ? `(${formatBytes(invoice.size)})` : '') || '' : '',\r\n        invoiceType = (invoice.type ? invoice.type : '') || '',\r\n        isImage = invoiceType.includes('image') ? true : false; \r\n\r\n    if(isExist(downloadData)) {\r\n        let fileType = invoiceName.split('.')[invoiceName.split('.').length - 1];\r\n        invoiceName = invoiceName.length > 20 ? invoiceName.substring(0, 20)+'...'+fileType : invoiceName+'.'+fileType;\r\n        \r\n        return `<a href=\"${invoiceUrl}\" title=\"${invoiceName} ${invoiceSize}\" target=\"_blank\" class=\"product-detail__invoice name-only\">\r\n            ${invoiceName} ${invoiceSize}\r\n        </a>`;\r\n    }\r\n    else {\r\n        return ''; \r\n    }\r\n}\r\n\r\nfunction generateCDGDownloadLinkFromBase64(downloadData=\"\", fileName=\"\", includeDate=true) {\r\n      let invoice = downloadData || '';\r\n      if(invoice) {\r\n          let base64 = invoice ? invoice.toString().split(',')[1] : '';\r\n          let fileType = invoice.split(':')[1] ? invoice.split(':')[1].split(';')[0].split('/')[1] : '';\r\n\r\n          let generatedFile = `Invoice__${fileName}__${moment().format('DD-MM-YYYY')}.${fileType}`;\r\n          let generatedName = shortenText(`Invoice__${fileName}__${moment().format('DD-MM-YYYY')}`, 25)+'.'+fileType; \r\n          \r\n          return `<a href=\"data:application/octet-stream;base64,${base64}\" title=\"${generatedFile}\" target=\"_blank\"\r\n                download=\"${generatedFile}\">${generatedName}</a>`\r\n      }\r\n      else {\r\n        return ''; \r\n      }                               \r\n}\r\n\r\nfunction generateCDGRepairVerb(source) {\r\n    let actual = ((source || '').toLowerCase()).split(' ');\r\n    let toVerb = '';\r\n\r\n    if (actual.includes('new'))\r\n        toVerb = 'created';\r\n    else if (actual.includes('submitted'))\r\n        toVerb = 'submitted';\r\n    else if (actual.includes('diagnosed'))\r\n        toVerb = 'diagnosed';\r\n    else if (actual.includes('repair'))\r\n        toVerb = 'repaired';\r\n    else if (actual.includes('burnInDesk'))\r\n        toVerb = 'tested';\r\n    else if (actual.includes('completed') || actual.includes('finished'))\r\n        toVerb = 'completed';\r\n    else if (actual.includes('canceled'))\r\n        toVerb = 'canceled';\r\n    else if (actual.includes('delivered'))\r\n        toVerb = 'delivered';\r\n    else\r\n        toVerb = 'checked';\r\n\r\n\r\n    return toVerb;\r\n}\r\n\r\n\r\nfunction setCDGContainerHeight() {\r\n\r\n    var availableHeight = $(window).height() - $('#cdg').offset().top - $('.navbar-fixed-bottom').outerHeight();\r\n    $('.page-container').attr('style', 'min-height:' + availableHeight + 'px');\r\n}\r\n\r\nfunction listenToCDGContainerClick() {\r\n    $('.panel [data-action=collapse]').click(function (e) {\r\n        e.preventDefault();\r\n        var $panelCollapse = $(this).parent().parent().parent().parent().nextAll();\r\n        $(this).parents('.panel').toggleClass('panel-collapsed');\r\n        $(this).toggleClass('rotate-180');\r\n\r\n        setContainerHeight(); // recalculate page height\r\n\r\n        if ($panelCollapse) {\r\n            $panelCollapse.slideToggle(150);\r\n        }\r\n    });\r\n}\r\n\r\nfunction bindCDGNotificationPermission(showPermission) {\r\n    if(showPermission) {\r\n        $('#notificationPermission').attr('style', 'position: relative;z-index: 10000;')\r\n        $(\"#cdgNav\").attr('style', 'top: 50px; ');\r\n\r\n         window.onscroll = () => {\r\n                let distanceFromTop = document.documentElement.scrollTop;\r\n                if (distanceFromTop >=40) {\r\n                    $(\"#cdgNav\").attr('style', 'top: 0; ');\r\n                }\r\n                else {\r\n                    $(\"#cdgNav\").attr('style', 'top: 50px; ');\r\n                }\r\n            };\r\n    }\r\n    else {\r\n        $(\"#cdgNav\").attr('style', 'top: 0; ');\r\n    }\r\n}\r\n\r\nfunction bindCDGHeaderOnScroll() {\r\n    /*\r\n        Dependency: JQuery\r\n        Used to bind header on CDG website (an add on of Adept)\r\n            to stick on top when scrolling past 100px\r\n    */\r\n\r\n    var num = 100;\r\n    if ($(window).width() <= 768) {\r\n        if ($(window).scrollTop() > num) {\r\n            $('.menu').addClass('fixed');\r\n            $('.menu').addClass('hr');\r\n            $('.menu2').addClass('menu-padding');\r\n            $('body').attr('style', `padding-top: ${num}px`);\r\n\r\n        } else {\r\n            $('.menu').removeClass('fixed');\r\n            $('.menu').removeClass('hr');\r\n            $('.menu2').removeClass('menu-padding');\r\n            $('body').attr('style', 'padding-top: 0;');\r\n        }\r\n    }\r\n    else {\r\n        $('.menu').removeClass('fixed');\r\n        $('.menu').removeClass('hr');\r\n        $('.menu2').removeClass('menu-padding');\r\n        $('body').attr('style', 'padding-top: 0;');\r\n    }\r\n}\r\n\r\n//=========================== End of specially made helpers for CDG project\r\n\r\nfunction stripHtmlTags(text) {\r\n    let source = text || '';\r\n    return source.replace(/<[^>]*>?/gm, '');\r\n}\r\n\r\nfunction returnObjectChildren(imageObject, structure = '', fallback = \"\") {\r\n    let source = imageObject,\r\n        result = '',\r\n        children = ((structure || '').split('.') || []);\r\n\r\n    /*  structure: parent.child.grandChild.greatGrandChild\r\n        splitted by \".\"\r\n    */\r\n\r\n    if (typeof source == 'object' && children.length) {\r\n        let child = children[0];\r\n        if (source[child] && typeof source[child] == 'object') {\r\n            let grandChild = children[1];\r\n            if (grandChild && source[child][grandChild] && typeof source[child][grandChild] == 'object') {\r\n                let ggChild = children[2];\r\n                if (ggChild && source[child][grandChild][ggChild] &&\r\n                    typeof source[child][grandChild][ggChild] == 'object') {\r\n                    let gggChild = children[3];\r\n\r\n                    result = source[child][grandChild][ggChild][gggChild];\r\n                }\r\n                else {\r\n                    result = source[child][grandChild][ggChild];\r\n                }\r\n            }\r\n            else {\r\n                result = source[child][grandChild];\r\n            }\r\n        }\r\n        else {\r\n            result = source[child];\r\n        }\r\n    }\r\n    else {\r\n        result = source;\r\n    }\r\n    result = result || fallback || '';\r\n    return result;\r\n}\r\n\r\nfunction clearVeeValidateErrorsOnTimeout(that={}, scope=\"\", callback, timeout = 200) {\r\n    /*\r\n        Vue only\r\n        Reset validator and clear errors after 100 ms\r\n    */\r\n    setTimeout(() => {\r\n\r\n\r\n        if (that.$validator && that.errors) {\r\n            that.$validator.pause();\r\n\r\n            that.$nextTick(() => {\r\n                that.errors.clear();\r\n                if (scope) {\r\n                    if (Array.isArray(scope)) {\r\n                        scope.forEach((sc) => {\r\n                            that.errors.clear(sc);\r\n                        })\r\n                    }\r\n                    else {\r\n                        that.errors.clear(scope);\r\n                    }\r\n                }\r\n                that.$validator.errors.clear();\r\n                that.$validator.fields.items.forEach(field => field.reset());\r\n                that.$validator.fields.items.forEach(field => that.errors.remove(field));\r\n                that.$validator.resume();\r\n\r\n                that.$nextTick(() => {\r\n                    callback && callback();\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            that.$nextTick(() => {\r\n                callback && callback();\r\n            });\r\n        }\r\n    }, timeout);\r\n}\r\n\r\nfunction returnId(objectID = \"\", childToFind = \"\") {\r\n    /*\r\n        Dependency: none\r\n        Used to find id of an object (usually nested in _id: {$oid}, _id: '' or id: '')\r\n        childToFind adds additional extra check to find id disguised as another field (ex: customerID).\r\n\r\n        Usage: returnId(customer, customerID) \r\n        returns customer id stored in _id, id, or customerID\r\n    */\r\n    let result = '';\r\n    if (typeof objectID == 'object') {\r\n\r\n        if (childToFind && objectID[childToFind]) {\r\n            if(typeof objectID[childToFind]  == 'object') {\r\n                result = objectID[childToFind] ? objectID[childToFind].$oid ? objectID[childToFind].$oid : objectID[childToFind] : ''; \r\n            }\r\n            else if(typeof objectID[childToFind] == 'string') {\r\n                result = objectID[childToFind]; \r\n            }\r\n            else {\r\n                result = objectID[childToFind]; \r\n            }\r\n        }\r\n        else if (objectID._id) {\r\n            result = objectID._id ? objectID._id.$oid ? objectID._id.$oid : objectID._id : '';\r\n        }\r\n        else if (objectID.id) {\r\n            result = objectID.id ? objectID.id.$oid ? objectID.id.$oid : objectID.id : '';\r\n        }\r\n        else if (objectID.$oid) {\r\n            result = objectID.$oid ? objectID.$oid : null;\r\n        }\r\n    }\r\n    else if (typeof objectID == 'string') {\r\n        result = objectID;\r\n    }\r\n    else {\r\n        result = objectID; \r\n    }\r\n    return result;\r\n}\r\n\r\nfunction camelToSentenceText(status = \"\") {\r\n    /*\r\n        Dependency: none\r\n        Used to change text formatting, from camelText to Sentence Text\r\n    */\r\n    var result = (status || '').replace(/([A-Z])/g, \" $1\");\r\n    var finalResult = result.charAt(0).toUpperCase() + result.slice(1);\r\n    return finalResult;\r\n}\r\n\r\nfunction camelToKebabText(status = \"\") {\r\n    /*\r\n        Dependency: none\r\n        Used to change text formatting, from camelText to kebab-text\r\n    */\r\n    return (status || '').replace(/[A-Z]/g, m => \"-\" + m.toLowerCase());\r\n}\r\n\r\nfunction camelToSnakeText(status = \"\") {\r\n    /*\r\n        Dependency: none\r\n        Used to change text formatting, from camelText to snake_text\r\n    */\r\n\r\n    return (status || '').replace(/[A-Z]/g, m => \"_\" + m.toLowerCase());\r\n}\r\n\r\nfunction sentenceToSnakeText(status=\"\") {\r\n    return (status || '').split(' ').map((word)=> word.toLowerCase()).join('_');\r\n}\r\n\r\nfunction sentenceToKebabText(status=\"\") {\r\n    return (status || '').split(' ').map((word)=> word.toLowerCase()).join('-');\r\n}\r\n\r\nfunction capitalize(text=\"\") {\r\n    /*\r\n        Dependency: Lodash\r\n        Used to return capitalized text while keeping previously capitalized letter\r\n        Example:  abc => Abc, ABC => ABC, aBC = ABC, Ab cd Ef => Ab Cd Ef\r\n    */\r\n\r\n    let source = text || '';\r\n    return _.toLower(source).replace(/\\w+/g, _.capitalize);\r\n}\r\n\r\nconst setLocalStorage = function (key=\"\", data=\"\") {\r\n    if (key && !!(window.localStorage)) {\r\n        if (Array.isArray(key)) {\r\n\r\n            /*\r\n                Structure: [{\r\n                    key: '',\r\n                    data: ''\r\n                }]\r\n            */\r\n\r\n            key = key.filter((k) => !!(k.key));\r\n            key.forEach((k) => {\r\n                window.localStorage.setItem(k.key, JSON.stringify(k.data || 'null'));\r\n            });\r\n\r\n        }\r\n        else {\r\n            if (key && data) {\r\n                window.localStorage.setItem(key, JSON.stringify(data || 'null'));\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nconst getLocalStorage = function (key=\"\") {\r\n    /*\r\n        Dependency: none.\r\n        Used to return localStorage with specified key, when available\r\n    */\r\n    let result = '';\r\n    if (key && !!(window.localStorage)) {\r\n        if (Array.isArray(key)) {\r\n            result = {};\r\n            key.forEach((k) => {\r\n                result[k] = JSON.parse(window.localStorage.getItem(k) || 'null');\r\n            });\r\n        }\r\n        else {\r\n            const data = JSON.parse(window.localStorage.getItem(key) || 'null');\r\n            result = data || '';\r\n        }\r\n    }\r\n    return result;\r\n};\r\n\r\nconst removeLocalStorage = function (key=\"\") {\r\n    /*\r\n        Dependency: none.\r\n        Used to remove localStorage with specified key, when available\r\n    */\r\n    if (key && !!(window.localStorage)) {\r\n        if (Array.isArray(key)) {\r\n            result = {};\r\n            key = key.filter((k) => !!(k));\r\n            key.forEach((k) => {\r\n                if(getLocalStorage(k)) {\r\n                    window.localStorage.removeItem(k);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            if(getLocalStorage(key)) {\r\n                window.localStorage.removeItem(key);\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nconst apiWarningMessage = function (response) {\r\n    /*\r\n        Dependency: Alert (PNotify);\r\n        Used to show warning messages when the api returns wrong response,\r\n        or when the response body success = false\r\n    */\r\n\r\n    let message = 'Some errors occured';\r\n    if (typeof response == 'object') {\r\n        let responseBody = (response || {}).body || {};\r\n        message = (responseBody.message || [])[0] || message;\r\n        Alert.warning(message);\r\n    }\r\n    else if (typeof response == 'array') {\r\n        let failedResponses = response.filter((res) => !response.body.success);\r\n        failedResponses.forEach((response) => {\r\n            let responseBody = (response || {}).body || {};\r\n            let failedMessage = (responseBody.message || [])[0] || message;\r\n            Alert.warning(failedMessage);\r\n        })\r\n    }\r\n    else if (typeof response == 'string') {\r\n        Alert.warning(response);\r\n    }\r\n    else {\r\n        Alert.warning(message);\r\n    }\r\n}\r\n\r\nconst inputValidation = function () {\r\n\r\n    $('body').on('keypress', 'input[type=number][step=1][min=0], input[type=number][step=1][min=1], input[number=\"true\"][leading-zero=\"true\"]', (e) => {\r\n        // integer number validation. allow keypress of integer and positive value. prevent e, +, -, ., and other characters\r\n        let key_codes = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 0, 8];\r\n        if (!($.inArray(e.which, key_codes) >= 0)) {\r\n            e.preventDefault();\r\n        }\r\n    });\r\n\r\n    $('body').on('keypress', 'input[type=\"number\"][step=\"any\"][min=0]', (e) => {\r\n        // decimal number validation. allow keypress of any number and positive value. prevent e, +, -, and other characters\r\n        let key_codes = [46, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 0, 8, 190];\r\n        if (!($.inArray(e.which, key_codes) >= 0)) {\r\n            e.preventDefault();\r\n        }\r\n    });\r\n}\r\n\r\nfunction veeValidate(that, scope = \"\", callback = null, showWarning=true) {\r\n    /*\r\n        Dependency: Vue, VeeValidate, Ladda (when applicable), Alert (PNotify)\r\n        Used to validate form before submitting\r\n    */\r\n\r\n    if (that) {\r\n        if (that.$validator) {\r\n            if (scope) {\r\n                that.$validator.validateAll(scope)\r\n                    .then((response) => {\r\n                        if (response) {\r\n                            callback && callback(true);\r\n                        }\r\n                        else {\r\n                            showWarning && validatorWarningMessage(that.errors);\r\n                            that.$forceUpdate(); \r\n                            stopLaddaOnTimeout();\r\n                            callback && callback(false);\r\n                        }\r\n                    })\r\n                    .catch((error) => {\r\n                        console.log(error);\r\n                        showWarning && Alert.error('Failed to validate form');\r\n                        stopLaddaOnTimeout();\r\n                        callback && callback(false);\r\n                    });\r\n            }\r\n            else {\r\n                that.$validator.validateAll()\r\n                    .then((response) => {\r\n                        if (response) {\r\n                            callback && callback(true);\r\n                        }\r\n                        else {\r\n                            showWarning && validatorWarningMessage(that.errors);\r\n                            that.$forceUpdate(); \r\n                            stopLaddaOnTimeout();\r\n                            callback && callback(false);\r\n                        }\r\n                    })\r\n                    .catch((error) => {\r\n                        console.log(error);\r\n                        showWarning && Alert.error('Failed to validate form');\r\n                        stopLaddaOnTimeout();\r\n                        callback && callback(false);\r\n                    });\r\n            }\r\n        }\r\n        else {\r\n            callback && callback(false);\r\n            stopLaddaOnTimeout();            \r\n        }\r\n    }\r\n    else {\r\n        stopLaddaOnTimeout();\r\n    }\r\n\r\n\r\n}\r\n\r\nconst validatorWarningMessage = function (validationErrors = {}, notifyRules = {}) {\r\n    let errors = _.cloneDeep(validationErrors || {});\r\n    errors.items = _.cloneDeep(errors.items || []);\r\n\r\n    let notify =  {...{}, ...notifyRules};\r\n    let customMessages = ['required'];\r\n    let veeValidateMessages = ['email', 'min', 'max', 'alpha_spaces', 'alpha_num',\r\n        'confirmed', 'numeric'];\r\n\r\n    errors.items = _.uniqBy(_.uniqBy(errors.items, 'rule'), 'field');\r\n    \r\n    (errors.items || []).forEach((error) => {\r\n        if (error.rule) {\r\n            if (error.rule == 'required') {\r\n                notify.required = 'Please fill in the required fields';\r\n            }\r\n            else if (veeValidateMessages.includes((error.rule || '').toLowerCase())) {\r\n                if (error.msg) {\r\n                    notify[error.rule] = error.msg || '';\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n    Object.keys(notify).forEach((key) => {\r\n        if (notify[key]) {\r\n            if (key == 'required') {\r\n                notify.required = 'Please fill in the required fields';\r\n            }\r\n            else if (key == 'minIssues') {\r\n                notify.minIssues = 'Please add at least one issue to continue';\r\n            }\r\n\r\n            Alert.warning(notify[key]);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nfunction Table(options={}){\r\n    let exportedColumns = options.exportedColumns == undefined ?  options.columns.map((column, index)=> {\r\n            if((column.exportable || column.exportable == undefined ) &&  (column.title || '').toLowerCase() != 'action'  && (column.data != 'actionBtn' || column.data != 'checkbox')) {\r\n                return index;\r\n            }\r\n        }).filter((column)=> column != undefined) : options.exportedColumns;\r\n\r\n    if(options.external==undefined) options.external = {};   \r\n    if(options.copyBtn == undefined){\r\n        options.copyBtn = \r\n        {\r\n            extend: 'copyHtml5',\r\n            className: 'btn btn-default',\r\n            exportOptions: {\r\n                stripNewlines: options.stripNewlines == undefined ? false : options.stripNewlines,\r\n                columns: exportedColumns ? exportedColumns : ':visible:not(.not-export-col)'\r\n            },\r\n            footer: false\r\n        };\r\n    }\r\n    if (options.excelBtn == undefined) {\r\n        options.excelBtn = {\r\n            extend: 'excelHtml5',\r\n            className: 'btn btn-default',\r\n            exportOptions: {\r\n                stripNewlines: options.stripNewlines == undefined ? false : options.stripNewlines,\r\n                columns: exportedColumns ? exportedColumns : ':visible:not(.not-export-col)'\r\n            },\r\n            footer: false\r\n        };\r\n    }\r\n    if (options.pdfBtn == undefined) {\r\n        if (options.pdfOrientation == undefined) {\r\n            options.pdfOrientation = 'portrait'\r\n        }\r\n\r\n        options.pdfBtn = {\r\n            extend: 'pdfHtml5',\r\n            className: 'btn btn-default',\r\n            orientation: options.pdfOrientation,\r\n            pageSize: 'LEGAL',\r\n            background: 'PDF created by AdeptForms.',\r\n            footer: function (currentPage, pageCount) { return currentPage.toString() + ' of ' + pageCount; },\r\n            header: 'simple text',\r\n            customize: function (doc) {\r\n                doc.defaultStyle.alignment = 'center';\r\n                doc.styles.tableHeader.alignment = 'center';\r\n                doc.content.splice(0, 1, {\r\n                    text: 'Adept Form', alignment: 'center', fontSize: 15, bold: true\r\n                })\r\n                doc.content.splice(0, 0, {\r\n                    alignment: 'center',\r\n                    width: 147,\r\n                    height: 40,\r\n                    image: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA2QAAADsCAMAAAAsPZXSAAAABlBMVEUAAAAAAAClZ7nPAAAAAXRSTlMAQObYZgAACuhJREFUeAHs3dFqwzAMhtHo/V96l8LLWOOin5L0nAcwufmQ7A163AAAAAAAAAAAAAAAAAAAAABA/XZkgcikBvnItAYxVzsD3NJAaGArlFkcHjqMsw1Q1213BtQuayPEAmumGaQSa6YZJBNbc1LZCdQQSyNkEmum2RnULJWtoAI8gDSoCO+MkEtsDUpkSGy3mjYzzEBj75/yepiBxN4+yvsHDPXVdoYZaGzsTH8yY4DEmpURLjQ2fbj//0Bjq8DxZhkaa8cIFzM0liqsZSoDjakM4ok1lfGV8onlKwONNW+Mafh9MbOMpjGzLA6N5SszytBYQnZhBI2pDI3luZbxDQKJbXAtQ2NpFkY0FmeWobEw1zIeLdiYUZaHxlQG0cY2WBgxyNKMMjSW5h0fy2LaXUfZRz8SjdXikQtj4CuxLMYivuPbxwe/EoOs/vasyDa/EpFFD2/Pqezfj4T8HJuqTGSI7OSHvTtId5TXgTCs2v+m7+g+/Q8ClD8rIvKRh20INOhN2UA4emi/FWV8K02NLZz5+fJoagwoqw+jc4NMV63D7Ykx5iNTRZSBPT0f2cqZ0SD7RWQ3OnxlDFn95VX1QybSIqkNspI7R1xZUcEdHmQ6Ddkge9jsy1G2XU8aZAVtjFk5Vq+MV9vRQabTjA0ysMTryFpcvx9kY8xXdtf/VWSaICtHNshqL9e9HWUaZGOsbZDpYwPKADK6l3TUp/7IxlgbZCAg6pFBY3P9PqbBVmkMKBNQRmeNaozM2LaTvcZ3zrQGyFQSZcBYDrJ3T+Lu18Kw6mJscdxhIuMGyoy9j0xglxveiRhkxsOKNjIQZTh++j5SJY5sjHVHZl6BKxgvGsbOQCZ+jgZZkbHUgDBr0YiyxzRMNqa2xgZZ4yADn+gLfBdZ9EbGEv7J2CCrR8aMGfnhIRNHhox1uhMNbUyQvYUs8eNW6hFd+Ujez6NGi/5qE2TtguzZGEAW6cjEgqzBaHFet3U6MvnGipAVBFk0DbIxVtXeNCbtIVNSjjW/fq+/iWyQecYkE1n8vysdWbRHpvNHi4MM5FhczYeiYLxoBJns9RfWRL/3MT745SAzVvKfQDCebjV6DkQGjEXkINO3nvpaSQ5JyxR007vCRzet9o62uZP2PRQT8lXH+cicwv54eOO6JSLzC9qpK6c2Hwl87HosYN23ZGQecfTiTeP2zpNTSecjk23sQ3apEJmTGvyt/v5KN0t4FSzlIrNWNrZ/v9j1v95P1w19+kPITIIMWaQii0VkemrGSmaxrMLkxiAyY8M3Enxk0oO+BsreMvZfWMLIaoNMj40V44cOfW5lyLgxC5lsZJJsfWcjk2/sAzJVIhMOMhFjktaVWW+pezXI/E1bnhx5hr6/gmx9fOYZS9tfPIOW0ZyVDDGhV5EBY+FnWUSYbm4HzeqLrM4YTXtjjaIgM+YEvgO5DXw2R2Yae7pf5iILI8js4fRZ1z1kGzNOVSGy2LkhZf0XVmpRZj05hjPfysKOxR0yyUUm39j5yJAxigysBFLV3OrSSgCZW777RYbHwBH1yNQZWWGOQS57yLTSnMMkH4CfpTgjdhq+kGE8lvFoTM8a46IjzkdGjfFN7yATReZ1wCcdnufxZsHnGzMi96JjDZnzYtWPPbe2D0S2TBBs+SVkZsX5xjxksYYsn5gRubGKTC4y92L+8chEjfGjI3GcEJkEqtwBa1xrLUD2/S+cJziOsXDsHY4snWAyMmUhM78obDCGMW8rARs/FlvI/vW4E1PDXnRQ9vvGGDIVGPOCzEbmWMooMFnNOfqePq8i7EcYdTgy1RtjyISak/Xw6oCBLIqQFR0Mx1h9kPVAVm+MICswBi/5A2QNguwZmb8vT5/RHxk3xgnmI+PECDLDkoEs+iPLCbK+xjgyEFQA6IvI7td2+5avGhjG6pD5x54hA7viGDsZGTFWjwxQ4Z3LOYB2MKfALGNPjr6F7LKPH4I+yFRvjCOLDWTKCzKpHhlSBg99gTEryBoga2As+2tBZh9FZtSaCPS8AisNMhKpFz09kan4mkcZMkKFphww9i4y/QYy3xgIiAbIinIMIAPG6pGtPdgeP4pMHBk3xmdkpyCrN8aQ5V0+BE/KLr9rBhjTXwqyVi9dFNjV5xW4sdbILju4sSNHi+TEtkamrDeB8Rx7H5lgpziyCIwskpABBSDWx1giMjU1BsJqH5lfve+PFrNj3ac+yD60krEiQ8YrHBmLVWOxH2TdkYEg6/PUon0YjApKz7F6ZH5ZiSHjo1mMrN7YPjI+Jz0jymQ1bowjg8bKkIHqLUcWvxFkTpeORva+sfeR+Xe9ePXWG8O7WR9knZCJItv51WuUIvvufAi8eINXb/woMmgMIIu2yGIHWVQaA8i0gUwFyMCVl8rRIkBGJNQHWS9kEdBYPbKsiw7aQ+YXotaRiR9QiowHGTfWG5mss1LwLBVABoyRe2jaQoZfV2j/lbVEY/zHc3xGNshEkOUdDm4sD5lykQkkRBYyfjABMrQbfE7aH9ndgSo0pqXlXYYXnp6fK5P8mtl96O+Gfy0y+USIMR/Zj2LTujIjroCxEmTmIpegboz9W/GhMgxknrG42TNuDCDjxvJe0AwyvLB9BZnqjIkZuznD0j0yXbS4XmhthmcZu9jvLWSBkCkbmdt1ffRbRBlEFmF8eVcGmbGs9dbaB1byJfpVuvW3qNnRJCbh66uYMeP/f8Z4UT4ybgwg4zVkEfjQbk+zbywsvbGCrOQn8TLOBzB2HjIQZd78psqYFjjWIAuCzF84ERlZydvPguv3g0wSN8aR0chjBi66bDq7xiKKjPnK4IyPRmEDY3C8aE5wMo0BZNpF5j1R7+EEnw//k5xLxL6yeB1ZHITMGMMUGbOXBJ9rBB3Gw19VwAdMTAAfpCJkflcXZECZPR03jNVNyVY/2N+sux7+Q6+bBwSVNmFGvpF3H2N42xhAFiAibpGlG6tChn8Zf7OeRdFP4P0y42cHjWjzkbV7fzBA9lCQ6cb4RIuPnYxuY0UbMCgbaTuRvnojxds1BxKP43ZRJvcPpOQbCzSWCrs59UJW9A/ozoP08IAGbva53V7KYRxGaxBl4Ku5wFj71v//M41HGZ0XmRQG2RgbZIKT3gJjg6xfG2R+lP3re0BWYExnGRtkxyPTKrIIB1nYbYJs2kSZicx2MMgG2USZzKem6HhujA2yiTItPP87xmZKZraJsshDFv9r7w5yG4QBIIp67n/pbiuVyAEzpIH3LtANX2MqEe8mMhwYs0O3sWjsnkxZvzGRcVMvD4EaK3pWY+StLdPYcYaMkyIb54vIHsSULfVlyOanRVTWf9wNGU+JbLQv3NeYyEzZb+3vUA1ZBrasz5Ahsk+IN7JbUllKj4HGREbSHTON+f897ci8kImM/KMTY7aNm9CYyDaedIfFU2nsw1SWF8Z9aOyjVHY0MVCZyGBy//H1iYmM20m6Y2bHYHYBsh2jzJYlGlsD8+uRv7YxUJnGUFn1qc9jGoNc/fsDGkNl/TXLgxtDZel/b6gxVNbNTGOoLNXb16MxVNa8HDpbNIbKxnINGoP8Me9j7U9oDJm924nE1mHM1j9Oichg19VF+yLJ1ACZHSEx6H+onGgMap1lg8TgtBqiMThUxwl5SQwysxiYxOBAI9lDY5A6jYHCoE5j0CYx6FMY1GkM+gQGdRKDOonBFfQFfQqDPoXBRcQFl/nWtAAAAAAAAAAAAAAAAAAAAADgByQOamRmp+DcAAAAAElFTkSuQmCC'\r\n                });\r\n                doc.content[2].table.widths = '*';\r\n            },\r\n            exportOptions: {\r\n                stripNewlines: options.stripNewlines == undefined ? false : options.stripNewlines,\r\n                columns: exportedColumns ? exportedColumns : ':visible:not(.not-export-col)'\r\n            },\r\n            footer: false\r\n        };\r\n    }\r\n    if (options.customBtn == undefined) {\r\n        options.customBtn = {};\r\n    }\r\n    if (options.fixedColumns == undefined) {\r\n        options.fixedColumns = {\r\n            leftColumns: 0,\r\n            rightColumns: 1\r\n        }\r\n    };\r\n\r\n    var basicOptions = {\r\n        \"serverSide\": true,\r\n        autoWidth: false,\r\n        dom: '<\"datatable-header\"fBl><\"datatable-scroll-wrap\"t><\"datatable-footer\"ip>',\r\n        language: {\r\n            search: '<span>Filter:</span> _INPUT_',\r\n            lengthMenu: '<span>Show:</span> _MENU_',\r\n            paginate: { 'first': 'First', 'last': 'Last', 'next': '&rarr;', 'previous': '&larr;' }\r\n        },\r\n        ajax: options.ajax,\r\n        columns: options.columns,\r\n        buttons: {\r\n            buttons: [\r\n                options.copyBtn,\r\n                options.excelBtn,\r\n                options.pdfBtn,\r\n                {\r\n                    extend: 'colvis',\r\n                    text: '<i class=\"icon-three-bars\"></i> <span class=\"caret\"></span>',\r\n                    className: 'btn bg-blue btn-icon'\r\n                },\r\n                options.customBtn\r\n            ]\r\n        },\r\n        columnDefs: options.columnDefs,\r\n        \"fnCreatedRow\": function (nRow, aData, iDataIndex) {\r\n            //$(nRow).children(\"td\").css(\"overflow\", \"hidden\");\r\n            $(nRow).children(\"td:last\").css(\"white-space\", \"nowrap\");\r\n            //$(nRow).children(\"td\").css(\"text-overflow\", \"ellipsis\");\r\n        },\r\n        scrollX: true,\r\n        fixedColumns: options.fixedColumns,\r\n        drawCallback: function () {\r\n            this.api().columns().every(function (id) {\r\n                var column = this;\r\n                var select = null;\r\n                if ($(column.footer()).find(\".filter-select\").length == 0) {\r\n                    select = $('<select class=\"filter-select form-control\" data-placeholder=\"Filter\"><option value=\"\"></option></select>')\r\n                        .appendTo($(column.footer()))\r\n                        .on('change', function () {\r\n                            var val = $.fn.dataTable.util.escapeRegex(\r\n                                $(this).val()\r\n                            );\r\n                            $(this).data('value', $(this).val());\r\n                            column\r\n                                .search(val ? val : '', true, false)\r\n                                .draw();\r\n                        });\r\n                } else {\r\n                    select = $(column.footer()).find(\".filter-select\");\r\n                    select.find('option').not(':first-child').remove();\r\n                }\r\n\r\n                if (column.ajax.params().columns[id].searchable == false) {\r\n                    select.remove();\r\n                } else {\r\n\r\n                    column.data().unique().sort().each(function (d, j) {\r\n                        if (d != null && d != undefined) {\r\n                            if (d['$date'] && d['$date'] != null) {\r\n                                var date = moment(parseInt(d['$date']['$numberLong'])).format(\"DD/MM/YYYY\");\r\n                                select.append('<option value=\"' + parseInt(d['$date']['$numberLong']) + '\">' + date + '</option>')\r\n                            } else {\r\n                                select.append('<option value=\"' + d + '\">' + d + '</option>')\r\n                            }\r\n                        }\r\n\r\n\r\n                    });\r\n                    select.val(select.data(\"value\"));\r\n                }\r\n\r\n                if (options.drawCallback && typeof options.drawCallback == 'function') {\r\n                    options.drawCallback();\r\n                }\r\n            });\r\n        },\r\n        enableExport: options.enableExport == undefined ? true : options.enableExport,\r\n        pageSize: options.pageSize == undefined  ? 'A3' : options.pageSize,\r\n        pdfOrientation: options.pdfOrientation == undefined ? 'landscape' : options.pdfOrientation,\r\n        exportedColumns: exportedColumns,\r\n    };\r\n\r\n     this.init = $('#'+options.id).DataTable($.extend(basicOptions,options.external));\r\n     this.get = function(){return this.init;}\r\n     this.edit = function(callback){\r\n        $('#'+options.id+' tbody').off('click','#editButton').on( 'click', '#editButton', function (e) {\r\n            var data = $('#'+options.id).DataTable().row( $(this).parents('tr') ).data();\r\n            callback(data);\r\n            e.preventDefault();\r\n        });\r\n    }\r\n    this.test = function (callback) {\r\n        $('#' + options.id + ' tbody').on('click', '#testButton', function (e) {\r\n            var data = $('#' + options.id).DataTable().row($(this).parents('tr')).data();\r\n            callback(data);\r\n            e.preventDefault();\r\n        });\r\n    }\r\n    this.copy = function (callback) {\r\n        $('#' + options.id + ' tbody').on('click', '.copyButton', function (e) {\r\n            var data = $('#' + options.id).DataTable().row($(this).parents('tr')).data();\r\n            callback(data);\r\n            e.preventDefault();\r\n        });\r\n    }\r\n\r\n    this.refresh = function (callback) {\r\n        $('#' + options.id).DataTable().ajax.reload();\r\n    }\r\n\r\n    this.delete = function (callback) {\r\n        var base = this;\r\n        $('#' + options.id + ' tbody').off('click', '#delButton').on('click', '#delButton', function (e) {\r\n            var data = $('#' + options.id).DataTable().row($(this).parents('tr')).data();\r\n            if (options.external.deleteURL != undefined) {\r\n                Alert.confirm(null, null, function (e, notice, val) {\r\n                    if (val) {\r\n                        send(options.external.deleteURL + \"/\" + data._id.$oid, { action: 'archive' }, function (data) {\r\n                            Alert.success();\r\n                            base.refresh();\r\n                            options.callback();\r\n                        });\r\n                    }\r\n                })\r\n            } else {\r\n                callback(data)\r\n            }\r\n            e.preventDefault();\r\n        });\r\n\r\n        $('#' + options.id + ' tbody').on('click', '#activateButton', function (e) {\r\n            var data = $('#' + options.id).DataTable().row($(this).parents('tr')).data();\r\n            if (options.external.deleteURL != undefined) {\r\n                Alert.confirm(null, null, function (e, notice, val) {\r\n                    if (val) {\r\n                        send(options.external.deleteURL + \"/\" + data._id.$oid, { action: 'activate' }, function (data) {\r\n                            Alert.success();\r\n                            $('#' + options.id).DataTable().ajax.reload();\r\n                            options.callback();\r\n                        });\r\n                    }\r\n                })\r\n            }else{\r\n                callback && callback(data)\r\n            }\r\n            e.preventDefault();\r\n        });\r\n\r\n    }\r\n\r\n    this.action = function(callback){\r\n        $('#'+options.id+' tbody').off('click','#actionButton').on( 'click', '#actionButton', function (e) {\r\n            var data = $('#'+options.id).DataTable().row( $(this).parents('tr') ).data();\r\n            callback && callback(data);\r\n            e.preventDefault();\r\n        });\r\n    }\r\n\r\n     this.click = function(selector=\"\",callback){\r\n        $('#'+options.id+' tbody').off('click', selector).on( 'click', selector, function (e) {\r\n            var data = $('#'+options.id).DataTable().row( $(this).parents('tr') ).data();\r\n            callback && callback(data);\r\n            e.preventDefault();\r\n        });\r\n    };\r\n\r\n    this.destroy = function () {\r\n        if ($.fn.DataTable.isDataTable(`#${options.id}`)) {\r\n            $(`#${options.id}`).DataTable().destroy();\r\n        }\r\n    }\r\n    //auto delete\r\n    if (options.external.deleteURL != undefined) {\r\n        this.delete();\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction print_func() {\r\n    printJS('printed_modal', 'html');\r\n}\r\n\r\nfunction get_color() {\r\n    var color = ['pink-800', 'violet-800', 'purple-800', 'blue-800', 'green-800', 'brown-800', 'slate-800', 'orange-800', 'danger-800', 'grey-800'];\r\n    return color[Math.floor((Math.random() * 9) + 0)]\r\n}\r\n\r\nfunction initialization(callback) {\r\n    bindLadda(); \r\n    bindLaddaButtonColor();\r\n    $('.remove-style').removeClass('remove-style');\r\n\r\n    callback && callback();\r\n}\r\n\r\nfunction bindLadda() {\r\n    Ladda.bind('.btn-ladda'); \r\n}\r\n\r\nfunction addLoadingToButton(buttonName=\"\") {\r\n    if (buttonName) {\r\n        if (Array.isArray(buttonName)) {\r\n            buttonName.forEach((bName) => {\r\n                $(`button[name=${bName}]`).attr('disabled', 'disabled');\r\n                $(`button[name=${bName}]`).append('<i class=\"icon-spinner2 spinner\"></i>');\r\n            })\r\n        }\r\n        else {\r\n            $(`button[name=${buttonName}]`).attr('disabled', 'disabled');\r\n            $(`button[name=${buttonName}]`).append('<i class=\"icon-spinner2 spinner\"></i>')\r\n        }\r\n    }\r\n}\r\n\r\nfunction removeLoadingFromButton(buttonName) {\r\n    if (buttonName) {\r\n        if (Array.isArray(buttonName)) {\r\n            buttonName.forEach((bName) => {\r\n                $(`button[name=${bName}]`).removeAttr('disabled');\r\n                $(`button[name=${bName}] i.icon-spinner2`).remove();\r\n            })\r\n        }\r\n        else {\r\n            $(`button[name=${buttonName}]`).removeAttr('disabled');\r\n            $(`button[name=${buttonName}] i.icon-spinner2`).remove();\r\n        }\r\n    }\r\n}\r\n\r\nfunction addLaddaToButton(buttonName=\"\") {\r\n    if (buttonName) {\r\n        if (Array.isArray(buttonName)) {\r\n            buttonName.forEach((bName) => {\r\n                $(`button[name=${bName}]`).addClass('.btn-ladda');\r\n                Ladda.bind(`button[name=\"${bName}\"]`);\r\n                $(`button[name=${bName}]`).attr('disabled', 'disabled');\r\n            })\r\n        }\r\n        else {\r\n            $(`button[name=${buttonName}]`).addClass('.btn-ladda');\r\n            Ladda.bind(`button[name=\"${buttonName}\"]`);\r\n            $(`button[name=${buttonName}]`).attr('disabled', 'disabled');\r\n        }\r\n    }\r\n}\r\n\r\nfunction removeLaddaFromButton(buttonName) {\r\n    if (buttonName) {\r\n        if (Array.isArray(buttonName)) {\r\n            buttonName.forEach((bName) => {\r\n                $(`button[name=${bName}]`).removeAttr('disabled').removeAttr('data-loading');\r\n                $(`button[name=${bName}] .ladda-label`).remove();\r\n                $(`button[name=${bName}] .ladda-spinner`).remove();\r\n                $(`button[name=${bName}] .ladda-progress`).remove();\r\n            });\r\n        }\r\n        else {\r\n            $(`button[name=${buttonName}]`).removeAttr('disabled').removeAttr('data-loading');\r\n            $(`button[name=${buttonName}] .ladda-label`).remove();\r\n            $(`button[name=${buttonName}] .ladda-spinner`).remove();\r\n            $(`button[name=${buttonName}] .ladda-progress`).remove();\r\n        }\r\n    }\r\n    else {\r\n        $(`.btn-ladda`).removeAttr('disabled').removeAttr('data-loading');\r\n    }\r\n}\r\n\r\n\r\nfunction bindLaddaButtonColor() {\r\n    if ($('.btn-ladda')[0]) {\r\n        if ($('.btn-ladda').hasClass('btn-primary')) {\r\n            if ($('.btn-ladda.btn-primary').hasClass('btn-primary--bordered')) {\r\n                $('.btn-ladda.btn-primary.btn-primary--bordered').attr('data-spinner-color', '#6FC04A');\r\n            }\r\n            else {\r\n                $('.btn-ladda.btn-primary').attr('data-spinner-color', '#333');\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction formatBytes(bytes, decimals) {\r\n    if (!bytes) return '0 Bytes';\r\n    var k = 1000,\r\n        dm = decimals <= 0 ? 0 : decimals || 2,\r\n        sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],\r\n        i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\r\n}\r\n\r\nfunction alertClickHandler() {\r\n    $('body').on('click', 'div.ui-pnotify', function (e) {\r\n        if (!$(this).hasClass('confirm')) {\r\n            if ($(this).hasClass('redirect-on-click')) {\r\n\r\n                const classes = $(this).attr('class').split(' ');\r\n                let link = (classes.find((className) => { className.includes('url=') }) || '')\r\n                    .substring(4)\r\n                    .replace('**', '/');\r\n                $('.modal').modal('hide') // closes all active pop ups.\r\n\r\n                if (link) {\r\n                    setTimeout(() => {\r\n                        window.location = url(link);\r\n                    }, 1000);\r\n                }\r\n            }\r\n\r\n            $(this).addClass('hide').hide();\r\n\r\n            var pnotifyList = document.getElementsByClassName('ui-pnotify');\r\n            var pnotifyHiddenList = document.getElementsByClassName('ui-pnotify hide');\r\n\r\n            if (pnotifyList.length == pnotifyHiddenList.length) {\r\n                Alert.closeAll();\r\n            }\r\n\r\n        }\r\n    });\r\n}\r\n\r\nvar Alert = {\r\n    stack_center: {\r\n        \"dir1\": \"down\", \"dir2\": \"right\", \"firstpos1\": 25,\r\n        \"firstpos2\": ($(window).width() / 2) - (Number(PNotify.prototype.options.width.replace(/\\D/g, '')) / 2)\r\n    },\r\n    options: {\r\n        title: \"title\",\r\n        text: \"msg\",\r\n        delay: 3000,\r\n        addclass: 'alert bg-primary alert-styled-left'\r\n    },\r\n    closeAll: function () {\r\n        // PNotify.closeAll();\r\n    },\r\n    init: function (msg, title) {\r\n        this.options.title = title;\r\n        this.options.text = msg;\r\n        new PNotify(this.options);\r\n\r\n    },\r\n    info: function (msg, title) {\r\n        if (msg == undefined) msg = 'This is info !';\r\n        if (title == undefined) title = 'Info';\r\n        this.options.addclass = 'alert bg-info alert-styled-left';\r\n        this.init(msg, title);\r\n\r\n    },\r\n    error: function (msg, title) {\r\n        if (msg == undefined) msg = \"Failed to update !\";\r\n        if (title == undefined) title = \"Failed\";\r\n        this.options.addclass = 'alert bg-danger alert-styled-left';\r\n        this.init(msg, title);\r\n    },\r\n    success: function (msg, title) {\r\n        if (msg == undefined) msg = \"Successfully updated !\";\r\n        if (title == undefined) title = \"Success\";\r\n        this.options.addclass = 'alert bg-primary alert-styled-left';\r\n        this.init(msg, title);\r\n    },\r\n    warning: function (msg, title) {\r\n        if (msg == undefined) msg = \"Please check again !\";\r\n        if (title == undefined) title = \"Warning\";\r\n        this.options.addclass = 'alert bg-warning alert-styled-left';\r\n        this.init(msg, title);\r\n    },\r\n    reason: function (msg, title, callback) {\r\n        if (msg == undefined) msg = 'msg';\r\n        if (title == undefined) title = \"Reason\";\r\n        var notice = new PNotify({\r\n            title: title,\r\n            text: msg,\r\n            hide: false,\r\n            addclass: 'alert bg-primary alert-styled-left',\r\n            stack: this.stack_center,\r\n            confirm: {\r\n                prompt: true,\r\n                buttons: [\r\n                    {\r\n                        text: 'Yes',\r\n                        addClass: 'btn btn-sm btn-success btn-rounded'\r\n                    },\r\n                    {\r\n                        addClass: 'btn btn-sm btn-danger btn-rounded'\r\n                    }\r\n                ]\r\n            },\r\n            buttons: {\r\n                closer: false,\r\n                sticker: false\r\n            },\r\n            history: {\r\n                history: false\r\n            }\r\n        });\r\n\r\n        // On confirm\r\n        notice.get().on('pnotify.confirm', function (e, notice, val) {\r\n            callback(e, notice, val);\r\n        })\r\n\r\n        // On cancel\r\n        notice.get().on('pnotify.cancel', function (e, notice) {\r\n            callback(e, notice, false);\r\n        });\r\n    },\r\n    socketNotification: function (msg = \"\", title = \"\", hide = false, addClass = '') {\r\n        if (!msg) msg = \"You have new notification\";\r\n        if (title == undefined) title = \"Info\";\r\n        this.options.addClass = `alert bg-info redirect-on-click alert-styled-left ${addClass}`;\r\n        this.init(msg, title);\r\n    },\r\n    download: function (msg, callback) {\r\n        var notice = new PNotify({\r\n            title: 'Confirmation',\r\n            text: '<p>Are you sure you want to download ' + msg + ' files?</p>',\r\n            hide: false,\r\n            stack: this.stack_center,\r\n            addclass: 'alert bg-info alert-styled-left',\r\n            type: 'warning',\r\n            confirm: {\r\n                confirm: true,\r\n                buttons: [\r\n                    {\r\n                        text: 'Yes',\r\n                        addClass: 'btn btn-sm bg-info-button btn-rounded'\r\n                    },\r\n                    {\r\n                        addClass: 'btn btn-sm bg-info-button btn-rounded'\r\n                    }\r\n                ]\r\n            },\r\n            buttons: {\r\n                closer: false,\r\n                sticker: false\r\n            },\r\n            history: {\r\n                history: false\r\n            }\r\n        })\r\n\r\n        // On confirm\r\n        notice.get().on('pnotify.confirm', function () {\r\n            callback(null, null, true);\r\n        })\r\n\r\n        // On cancel\r\n        notice.get().on('pnotify.cancel', function () {\r\n            callback(null, null, false);\r\n        });\r\n    },\r\n    confirm: function (title, msg, callback) {\r\n        if (msg == null) msg = '<p>Are you sure you want to proceed?</p>';\r\n        if (title == null) title = 'Confirmation';\r\n        var notice = new PNotify({\r\n            title: title,\r\n            text: msg,\r\n            hide: false,\r\n            stack: this.stack_center,\r\n            addclass: 'alert bg-info alert-styled-left',\r\n            type: 'warning',\r\n            confirm: {\r\n                confirm: true,\r\n                buttons: [\r\n                    {\r\n                        text: 'Yes',\r\n                        addClass: 'btn btn-sm bg-info-button  btn-rounded'\r\n                    },\r\n                    {\r\n                        addClass: 'btn btn-sm bg-info-button btn-rounded'\r\n                    }\r\n                ]\r\n            },\r\n            buttons: {\r\n                closer: false,\r\n                sticker: false\r\n            },\r\n            history: {\r\n                history: false\r\n            }\r\n        })\r\n\r\n        // On confirm\r\n        notice.get().on('pnotify.confirm', function () {\r\n            callback(null, null, true);\r\n        })\r\n\r\n        // On cancel\r\n        notice.get().on('pnotify.cancel', function () {\r\n            callback(null, null, false);\r\n        });\r\n    },\r\n    form: function () {\r\n        /*\r\n          var notice = new PNotify({\r\n            text: $('#form_notice').html(),\r\n            width: '300px',\r\n            hide: false,\r\n            addclass: 'bg-slate',\r\n            buttons: {\r\n                closer: false,\r\n                sticker: false\r\n            },\r\n            insert_brs: false\r\n        });\r\n\r\n        // Remove if cancelled\r\n        notice.get().find('button[name=cancel]').on('click', function() {\r\n            notice.remove();\r\n        })\r\n\r\n        // Submit form\r\n        notice.get().submit(function() {\r\n            var username = $(this).find('input[name=username]').val();\r\n            if (!username) {\r\n                alert('Please provide a username.');\r\n                return false;\r\n            }\r\n            notice.update({\r\n                title: 'Welcome',\r\n                text: 'Successfully logged in as ' + username,\r\n                addclass: 'bg-teal',\r\n                icon: true,\r\n                width: PNotify.prototype.options.width,\r\n                hide: true,\r\n                buttons: {\r\n                    closer: true,\r\n                    sticker: true\r\n                }\r\n            });\r\n            return false;\r\n        });\r\n*/\r\n    }\r\n\r\n}\r\n\r\n$(window).resize(function () {\r\n    Alert.stack_center.firstpos2 = ($(window).width() / 2) - (Number(PNotify.prototype.options.width.replace(/\\D/g, '')) / 2);\r\n});\r\n\r\nfunction send(url, jsonData, callback) {\r\n    $.ajax({\r\n        url: url,\r\n        type: \"POST\",\r\n        data: jsonData,\r\n        cache: false,\r\n        headers: { \"cache-control\": \"no-cache\" },\r\n        dataType: \"JSON\",\r\n        success: function (data, textStatus, jqXHR) {\r\n            if (callback != null && jqXHR.status != 204) {\r\n                callback(data);\r\n            } else {\r\n                Alert.warning(jqXHR.statusText);\r\n            }\r\n        },\r\n        error: function (jqXHR, textStatus, errorThrown) {\r\n\r\n            Alert.error('Please check your data', 'Something error occured');\r\n            console.log(jqXHR, textStatus, errorThrown);\r\n\r\n        }\r\n    });\r\n}\r\n\r\nfunction sendForm(url, formData, callback) {\r\n    $.ajax({\r\n        url: url,\r\n        type: 'POST',\r\n        data: formData,\r\n        cache: false,\r\n        contentType: false,\r\n        processData: false,\r\n        success: function (data, textStatus, jqXHR) {\r\n            if (callback != null && jqXHR.status != 204) {\r\n                callback(data);\r\n            } else {\r\n                Alert.warning(jqXHR.statusText);\r\n            }\r\n        },\r\n        error: function (jqXHR, textStatus, errorThrown) {\r\n            Alert.error(errorThrown);\r\n            console.log(jqXHR, textStatus, errorThrown);\r\n        }\r\n    });\r\n}\r\n\r\nfunction get(url, callback) {\r\n    $.ajax({\r\n        url: url,\r\n        type: \"GET\",\r\n        dataType: \"JSON\",\r\n        success: function (data) {\r\n            if (callback != null) {\r\n                callback(data);\r\n            }\r\n        },\r\n        error: function (jqXHR, textStatus, errorThrown) {\r\n            Alert.error('Error get / fetch data =>' + errorThrown);\r\n            console.log(jqXHR, textStatus, errorThrown);\r\n\r\n        }\r\n    });\r\n}\r\nfunction get_ip_info(ip, callback) {\r\n    $.ajax({\r\n        url: \"https://ipapi.co/\" + ip + \"/jsonp\",\r\n\r\n        // The name of the callback parameter, as specified by the YQL service\r\n        jsonp: \"callback\",\r\n\r\n        // Tell jQuery we're expecting JSONP\r\n        dataType: \"jsonp\",\r\n\r\n\r\n\r\n        // Work with the response\r\n        success: function (response) {\r\n            callback(response); // server response\r\n        }\r\n    });\r\n}\r\n\r\nfunction url(path) {\r\n    let source = path || '';\r\n    if (source.startsWith('/')) {\r\n        source = source.substring(1);\r\n    }\r\n    return (base_url || '') + source;\r\n}\r\n\r\nfunction form(modalID) {\r\n    var data = {\r\n        element: function () {\r\n            return $('#form_' + modalID);\r\n        },\r\n        reset: function () {\r\n            this.element()[0].reset();\r\n            this.element().find(\"[type='checkbox']\").prop('checked', false);\r\n            this.element().find(\"[type='radio']\").prop('checked', false);\r\n            $(\".validation-error-label\").text(\"\");\r\n        },\r\n        valid: function () {\r\n            return this.element().valid();\r\n        },\r\n        submit: function (callback) {\r\n            var base = this;\r\n            $(\"#\" + modalID + \"_save\").click(function (e) {\r\n                callback(base.valid(), base.element())\r\n            });\r\n        },\r\n        get_by_id: function (field) {\r\n            return $('#form_' + modalID + \" #\" + field);\r\n        },\r\n        get_by_name: function (field) {\r\n            return $('#form_' + modalID + \" [name='\" + field + \"']\");\r\n        }\r\n    }\r\n    return data;\r\n}\r\n\r\nfunction Modal(id) {\r\n    this.form = function () {\r\n        return form(id);\r\n    }\r\n    this.get = function () {\r\n        return $(\"#\" + id);\r\n    }\r\n    this.show = function () {\r\n        this.get().modal('show');\r\n    }\r\n    this.hide = function () {\r\n        this.get().modal('hide');\r\n    }\r\n    this.get().on('show.bs.modal', function () {\r\n        $(\".validation-error-label\").text(\"\");\r\n        if (typeof $(this).find(\"form\")[0]) {\r\n            $(this).find(\"form\")[0].reset();\r\n            $(this).find(\"form [type='hidden']\").val(\"\");\r\n            $(this).find(\"form select\").change();\r\n            $(this).find(\"form [type='radio']\").prop(\"checked\", false);\r\n            $(this).find(\"form [type='radio']\").parent().removeClass(\"checked\");\r\n        }\r\n    });\r\n\r\n}\r\n\r\nfunction multiInputSet(element, arr) {\r\n    function refresh_emails() {\r\n        var emails = new Array();\r\n        var container = element.siblings('.multiple_emails-container');\r\n        container.find('.multiple_emails-email span.email_name').each(function () { emails.push($(this).html()); });\r\n        element.val(JSON.stringify(emails)).trigger('change');\r\n    }\r\n    element.parent().find(\".select2-choices\").empty();\r\n    arr.map(function (x) {\r\n        element.parent().find(\".select2-choices\").append(\r\n            '<li class=\"select2-search-choice\"><a href=\"#\" class=\"select2-search-choice-close\" title=\"Remove\">' +\r\n            '<span class=\"glyphicon glyphicon-remove\"></span></a><span class=\"email_name\" data-email=\"' + x + '\">' + x + '</span></li>'\r\n        );\r\n    });\r\n    element.val(JSON.stringify(arr)).trigger('change');\r\n    $(element).parent().find(\".multiple_emails-close\").click(function () {\r\n        $(this).parent().remove();\r\n        refresh_emails();\r\n    });\r\n}\r\n\r\nvar urlPath = function (url, i) {\r\n    url = url.split(\"/\");\r\n    return url[i];\r\n}\r\n\r\n// Loading Animation --> loading.start(\"#selector/.selector\")\r\nvar loading = {\r\n    start: function (elem, message, style) {\r\n        var block = $(elem);\r\n        let overlayCSS = {\r\n            boxShadow: '0 0 0 1px #ddd',\r\n            opacity: .8,\r\n            backgroundColor: '#fff'\r\n        };\r\n        overlayCSS = style ? { ...overlayCSS, ...style } : overlayCSS;\r\n        let overlayMessage = message ? `<i class=\"icon-spinner2 spinner\"></i> ${message}` : `<i class=\"icon-spinner2 spinner\"></i>`;\r\n        $(block).block({\r\n            message: overlayMessage,\r\n            overlayCSS: {\r\n                backgroundColor: overlayCSS.backgroundColor,\r\n                opacity: overlayCSS.opacity,\r\n                cursor: 'wait',\r\n                'box-shadow': overlayCSS.boxShadow\r\n            },\r\n            css: {\r\n                border: 0,\r\n                padding: 0,\r\n                backgroundColor: 'none'\r\n            }\r\n        });\r\n    },\r\n    stop: function (elem) {\r\n        var block = $(elem);\r\n        $(block).unblock();\r\n    }\r\n}\r\n\r\nvar simpleScrollHover = function () {\r\n    $('.simple-scroll-hover').mouseenter(function () {\r\n        var right = $(this).css('padding-right').replace(/[^-\\d\\.]/g, ''),\r\n            newPadding = parseInt(right) - 8;\r\n        $(this).css('padding-right', newPadding);\r\n        // chat menu\r\n        var rightChild = $(this).find('.media-list-linked .media-link').css('padding-right');\r\n        if (rightChild != undefined) {\r\n            var padd = rightChild.replace(/[^-\\d\\.]/g, ''),\r\n                newPaddingChild = parseInt(padd) - 8;\r\n            $(this).find('.media-list-linked .media-link').css('padding-right', newPaddingChild);\r\n        }\r\n    });\r\n    $('.simple-scroll-hover').mouseleave(function () {\r\n        var right = $(this).css('padding-right').replace(/[^-\\d\\.]/g, ''),\r\n            newPadding = right;\r\n        if (right > 0) {\r\n            newPadding = parseInt(right) + 8;\r\n        }\r\n        $(this).css('padding-right', newPadding);\r\n        // chat menu\r\n        var rightChild = $(this).find('.media-list-linked .media-link').css('padding-right');\r\n        if (rightChild != undefined) {\r\n            var padd = rightChild.replace(/[^-\\d\\.]/g, ''),\r\n                newPaddingChild = padd;\r\n            if (padd > 0) {\r\n                newPaddingChild = parseInt(padd) + 8;\r\n            }\r\n            $(this).find('.media-list-linked .media-link').css('padding-right', newPaddingChild);\r\n        }\r\n    });\r\n}\r\n\r\nfunction apply_style() {\r\n    $(\"[type='checkbox']:not(.switch)\").uniform();\r\n    $('.datepicker-form').clone().attr('type', 'text').insertAfter('.datepicker-form').prev().remove();\r\n    $('.datepicker-form').datepicker();\r\n    $(\".switch\").bootstrapSwitch();\r\n    $(\"[type='radio'].choice\").uniform({\r\n        radioClass: 'choice'\r\n    });\r\n    $(\"[type='file']\").uniform({\r\n        fileButtonClass: 'action btn bg-blue'\r\n    });\r\n    $('[data-popup=\"tooltip\"]').tooltip();\r\n}\r\n\r\n// User Agent Parser\r\nvar userAgent = function (ua) {\r\n    var parser = new UAParser();\r\n    parser.setUA(ua);\r\n    var result = parser.getResult();\r\n    return result;\r\n}\r\n\r\n// function dateFormat(times){\r\n//     var result = moment.utc(times).local().calendar(null, {\r\n//         sameDay: 'Today'.fromNow,\r\n//         nextDay: '[Tomorrow]',\r\n//         nextWeek: 'dddd',\r\n//         lastDay: '[Yesterday] hh:mm A'.fromNow,\r\n//         lastWeek: '[Last] dddd, DD MMM YYYY hh:mm A',\r\n//         sameElse: 'ddd, DD/MM/YYYY hh:mm A'\r\n//     });\r\n//     return result;\r\n// }\r\n\r\n$.fn.serializeObject = function () {\r\n    var o = {};\r\n    var a = this.serializeArray();\r\n    $.each(a, function () {\r\n        if (o[this.name] !== undefined) {\r\n            if (!o[this.name].push) {\r\n                o[this.name] = [o[this.name]];\r\n            }\r\n            o[this.name].push(this.value || '');\r\n        } else {\r\n            o[this.name] = this.value || '';\r\n        }\r\n    });\r\n    return o;\r\n};\r\n\r\nfunction getLocationIP(ip, callback) {\r\n    get(url(\"location/get/\" + ip), function (iplocation) {\r\n        callback(iplocation)\r\n    })\r\n}\r\n\r\nfunction copyToClipboard(elem) {\r\n    // create hidden text element, if it doesn't already exist\r\n    var targetId = \"_hiddenCopyText_\";\r\n    var isInput = elem.tagName === \"INPUT\" || elem.tagName === \"TEXTAREA\";\r\n    var origSelectionStart, origSelectionEnd;\r\n    if (isInput) {\r\n        // can just use the original source element for the selection and copy\r\n        target = elem;\r\n        origSelectionStart = elem.selectionStart;\r\n        origSelectionEnd = elem.selectionEnd;\r\n    } else {\r\n        // must use a temporary form element for the selection and copy\r\n        target = document.getElementById(targetId);\r\n        if (!target) {\r\n            var target = document.createElement(\"textarea\");\r\n            target.style.position = \"absolute\";\r\n            target.style.left = \"-9999px\";\r\n            target.style.top = \"0\";\r\n            target.id = targetId;\r\n            document.body.appendChild(target);\r\n        }\r\n        target.textContent = elem.textContent;\r\n    }\r\n    // select the content\r\n    var currentFocus = document.activeElement;\r\n    target.focus();\r\n    target.setSelectionRange(0, target.value.length);\r\n\r\n    // copy the selection\r\n    var succeed;\r\n    try {\r\n        succeed = document.execCommand(\"copy\");\r\n    } catch (e) {\r\n        succeed = false;\r\n    }\r\n    // restore original focus\r\n    if (currentFocus && typeof currentFocus.focus === \"function\") {\r\n        currentFocus.focus();\r\n    }\r\n\r\n    if (isInput) {\r\n        // restore prior selection\r\n        elem.setSelectionRange(origSelectionStart, origSelectionEnd);\r\n    } else {\r\n        // clear temporary content\r\n        target.textContent = \"\";\r\n    }\r\n    return Alert.info('Success', 'URL copied to clipboard!');\r\n}\r\n\r\nfunction notifyMe(title, iconURL, text, redirect) {\r\n    if (Notification.permission !== \"granted\")\r\n        Notification.requestPermission();\r\n    else {\r\n        var notification = new Notification(title, {\r\n            icon: iconURL,\r\n            body: text,\r\n        });\r\n\r\n        notification.onclick = function () {\r\n            window.open(url(redirect));\r\n        };\r\n\r\n    }\r\n\r\n}\r\n\r\nvar validateSignature = function () {\r\n    var isValid = true,\r\n        errorMsg = '<label class=\"signature-error validation-error-label\">Please provide signature above.</label>';\r\n    $('.signature-error.validation-error-label').remove();\r\n    $('.form-group .m-signature-pad--body.required input').each(function () {\r\n        if ($(this).val() === '') {\r\n            $(this).parents('#' + this.name).append(errorMsg);\r\n            isValid = false;\r\n        }\r\n    });\r\n    // if(!isValid) Alert.warning(\"Please provide required signature.\");\r\n    return isValid;\r\n}\r\n\r\nvar getParameterByName = function (name, url) {\r\n    if (!url) url = window.location.href;\r\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\r\n    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\r\n        results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\r\n}\r\n\r\nString.prototype.capitalize = function () {\r\n    return this.charAt(0).toUpperCase() + this.slice(1);\r\n}\r\n\r\n\r\n\r\n$(document).ready(function () {\r\n    document.addEventListener('DOMContentLoaded', function () {\r\n        if (typeof Notification == 'undefined') {\r\n            console.log('Desktop notifications not available in your browser. Try Chromium.');\r\n            return;\r\n        }\r\n        if (typeof Notification != 'undefined') {\r\n            if (Notification.permission !== \"granted\")\r\n                Notification.requestPermission();\r\n        }\r\n\r\n    });\r\n\r\n    if (typeof Notification != 'undefined') {\r\n        if (Notification.permission !== \"granted\") {\r\n            Notification.requestPermission();\r\n        }\r\n    }\r\n\r\n    jQuery.validator.setDefaults({\r\n        debug: true,\r\n        errorClass: 'validation-error-label',\r\n        successClass: 'validation-valid-label',\r\n        highlight: function (element, errorClass) {\r\n            $(element).removeClass(errorClass);\r\n        },\r\n        unhighlight: function (element, errorClass) {\r\n            $(element).removeClass(errorClass);\r\n        },\r\n        errorPlacement: function (error, element) {\r\n\r\n            // Styled checkboxes, radios, bootstrap switch\r\n            if (element.parents('div').hasClass(\"checker\") || element.parents('div').hasClass(\"choice\") || element.parent().hasClass('bootstrap-switch-container')) {\r\n                if (element.parents('label').hasClass('checkbox-inline') || element.parents('label').hasClass('radio-inline')) {\r\n                    error.appendTo(element.parent().parent());\r\n                }\r\n                else {\r\n                    error.appendTo(element.parent().parent().parent());\r\n                }\r\n            }\r\n\r\n            // Unstyled checkboxes, radios\r\n            else if (element.parents('div').hasClass('checkbox') || element.parents('div').hasClass('radio')) {\r\n                error.appendTo(element.parent().parent().parent());\r\n            }\r\n\r\n            // Input with icons and Select2\r\n            else if (element.parents('div').hasClass('has-feedback') || element.hasClass('select2-hidden-accessible')) {\r\n                error.appendTo(element.parent());\r\n            }\r\n\r\n            // Inline checkboxes, radios\r\n            else if (element.parents('label').hasClass('checkbox-inline') || element.parents('label').hasClass('radio-inline')) {\r\n                error.appendTo(element.parent().parent());\r\n            }\r\n\r\n            // Input group, styled file input\r\n            else if (element.parent().hasClass('uploader') || element.parents().hasClass('input-group')) {\r\n                error.appendTo(element.parent().parent());\r\n            }\r\n\r\n            else {\r\n                error.insertAfter(element);\r\n            }\r\n        },\r\n        validClass: \"validation-valid-label\",\r\n        success: function (label) {\r\n            label.addClass(\"validation-valid-label\").text(\"Success.\")\r\n        }\r\n    });\r\n\r\n    // $(\"html\").niceScroll({horizrailenabled:true,mousescrollstep: 60,});\r\n    simpleScrollHover();\r\n    $('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\r\n        if ($.fn.dataTable != undefined) {\r\n            $.fn.dataTable.tables({ visible: true, api: true }).columns.adjust();\r\n        }\r\n\r\n    });\r\n\r\n    $('#iplocation_modal').on('shown.bs.modal', function (e) {\r\n        var ip = e.relatedTarget.dataset.ip;\r\n        var iplocation_modal = new Modal('iplocation_modal');\r\n        var iplocation_form = iplocation_modal.form();\r\n\r\n\r\n        getLocationIP(ip, function (iplocation) {\r\n            iplocation_form.reset();\r\n            if (iplocation != \"undefined\" || iplocation != null) {\r\n                var loc = iplocation;\r\n                iplocation_form.get_by_name(\"ip\").val(ip);\r\n                iplocation_form.get_by_name(\"country_name\").val(loc.country_name);\r\n                iplocation_form.get_by_name(\"region_name\").val(loc.region_name);\r\n                iplocation_form.get_by_name(\"city_name\").val(loc.city_name);\r\n                iplocation_form.get_by_name(\"zip_code\").val(loc.zip_code);\r\n                iplocation_form.get_by_name(\"time_zone\").val(loc.time_zone);\r\n\r\n                var positionInit = { lat: loc.latitude, lng: loc.longitude };\r\n\r\n                var map = new google.maps.Map(document.getElementById(\"map\"), {\r\n                    zoom: 8,\r\n                    center: positionInit\r\n                });\r\n\r\n                var marker = new google.maps.Marker({\r\n                    position: positionInit,\r\n                    map: map\r\n                });\r\n\r\n            }\r\n            //console.log(location);\r\n        });\r\n\r\n    });\r\n\r\n    // $('#print_this_modal').click(function() {\r\n    //     var printed_modal = 'printed_modal';\r\n    //     print_func(printed_modal);\r\n    // });\r\n\r\n});\r\n\r\n// ==================== Bootstrap Multiselect\r\nVue.component('multiselectbootstrap', {\r\n    template: '<select/>',\r\n    props: ['options', 'value'],\r\n    mounted: function () {\r\n        var vm = this;\r\n        var custom = this.options.map(function (data, index) {\r\n            return { label: data.text, title: data.text, value: data.id };\r\n        })\r\n\r\n        $(this.$el).multiselect({\r\n            includeSelectAllOption: true,\r\n            enableFiltering: true,\r\n            templates: {\r\n                filter: '<li class=\"multiselect-item multiselect-filter\"><i class=\"icon-search4\"></i> <input class=\"form-control\" type=\"text\"></li>'\r\n            },\r\n            onSelectAll: function () {\r\n                $.uniform.update();\r\n                console.log($(vm.$el).val());\r\n                vm.$emit('input', $(vm.$el).val());\r\n            },\r\n            onChange: function (option, checked) {\r\n                console.log($(vm.$el).val());\r\n                vm.$emit('input', $(vm.$el).val());\r\n            }\r\n        });\r\n        $(this.$el).multiselect('dataprovider', custom);\r\n        $(this.$el).multiselect('select', this.value);\r\n    },\r\n    beforeDestroy: function () {\r\n        $(this.$el).remove();\r\n    }\r\n});\r\n\r\n// ==================== Vue Select2\r\nvar Select2Component = Vue.component('select2', {\r\n    template: '<select/>',\r\n    props: {\r\n        options: {\r\n            default() {\r\n                return [];\r\n            }\r\n        },\r\n        value: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        dataWidth: {\r\n            default() {\r\n                return '100%'; \r\n            }\r\n        },\r\n        text: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        placeholder: {\r\n            default() {\r\n                return 'Select an option';\r\n            }\r\n        },\r\n    },\r\n    mounted: function () {\r\n        var vm = this;\r\n        this.initSelect2(); \r\n        this.listenToChange(); \r\n    },\r\n    computed: {\r\n        selectOptions() {\r\n            let options = { \r\n                    data: this.options, \r\n                    width: this.dataWidth,\r\n                    templateResult: function(data) {\r\n                        return $(data.optionHtml || `<span>${data.text}</span>`);\r\n                    },\r\n                    escapeMarkup: function(markup) {\r\n                        return markup;\r\n                    },\r\n                    templateSelection: function(data) {\r\n                        return $(data.selectedHtml || `<span>${data.text}</span>`);\r\n                    }\r\n                };\r\n            return options;\r\n        }\r\n    },\r\n    methods: {\r\n        initSelect2() {\r\n            const vm = this;\r\n            $(this.$el)\r\n                .select2(this.selectOptions)\r\n                .val(this.value)\r\n                .change();\r\n        },\r\n        listenToChange() {\r\n            const vm = this;\r\n            $(this.$el).on('change', function () {\r\n                // var data = $(this).select2('data')\r\n                if ($(this).attr('multiple') == \"multiple\") {\r\n                    vm.$emit('input', $(this).val())\r\n                } else {\r\n                    vm.$emit('input', this.value)\r\n                    // Only single value\r\n                    if (vm.text !== undefined) vm.$emit('update:text', $(this).find('option:selected').text())\r\n                }\r\n            });\r\n        },\r\n        triggerChange() {\r\n            $(this.$el)\r\n                .val(this.value)\r\n                .trigger('change.select2');\r\n        },\r\n    },\r\n    watch: {\r\n        options: function (options) {\r\n            $(this.$el)\r\n                .empty()\r\n                .select2(this.selectOptions);\r\n            this.triggerChange();\r\n            // $(this.$el).select2({ data: options }).val(this.value).change();\r\n        },\r\n        value: function (value) {\r\n            // Only single value\r\n            this.$emit(\"change\", value);\r\n            this.triggerChange();\r\n            if (this.text !== undefined) $(this.$el).select2(this.selectOptions).val(value).change();\r\n        }\r\n    },\r\n    beforeDestroy: function () {\r\n        $(this.$el).off().select2('destroy')\r\n    }\r\n});\r\n\r\n// ==================== Vue Switcherry\r\n// Usage: <switcherry position=\"left\" alignment=\"center\" size=\"lg\" text=\"Checkbox Text\" :value=\"modelName\" v-model=\"modelName\"></switcherry>\r\n// Size: xs, sm, lg\r\nvar switcherryComponent = Vue.component('switcherry', {\r\n    template: '<div class=\"checkbox checkbox-switchery\">' +\r\n        '<label>' +\r\n        '<input type=\"checkbox\" class=\"switch\" />' +\r\n        '</label>' +\r\n        '</div>',\r\n    props: ['position', 'size', 'text', 'alignment', 'value'],\r\n    mounted: function () {\r\n        var vm = this;\r\n        if (this.value) {\r\n            $(this.$el).find('input').addClass('checked');\r\n        } else {\r\n            $(this.$el).find('input').removeClass('checked');\r\n        }\r\n        if (this.value) $(this.$el).find('input').attr(\"checked\", \"checked\");\r\n        if (this.size != \"\") $(this.$el).addClass('switchery-' + this.size);\r\n        if (this.position != \"\") $(this.$el).addClass('checkbox-' + this.position);\r\n        if (this.alignment != \"\") $(this.$el).addClass('text-' + this.alignment);\r\n        if (this.text != \"\") $(this.$el).find('label').append(this.text);\r\n\r\n        var Elem = this.$el.querySelector('.switch');\r\n        var ElemInit = new Switchery(Elem);\r\n        Elem.onchange = function () {\r\n            vm.$emit('input', Elem.checked);\r\n        };\r\n    },\r\n    watch: {\r\n        /*value: function (value) {\r\n            $(this.$el).find('input').trigger(\"click\")\r\n        }*/\r\n    },\r\n    beforeDestroy: function () {\r\n        $(this.$el).remove();\r\n    }\r\n});\r\n\r\n// ==================== Vue Datepicker\r\nvar dateToday = new Date();\r\nvar DatepickerComponent = Vue.component('datepicker', {\r\n    template: `<input :name=\"name\" :value=\"value\" @input=\"emitValue\" :disabled=\"disabled\"/>`,\r\n    props: ['dateFormat', 'minDate', 'maxDate', 'value', 'name', 'disabled'],\r\n    data: {\r\n        date: '',\r\n    },\r\n    mounted: function () {\r\n        this.refresh();\r\n        this.getInputOnBlur();\r\n    },\r\n    methods: {\r\n        getInputOnBlur() {\r\n            const base = this;\r\n            let todayDate = moment().format('x');\r\n            let minDate = this.minDate ? this.getDate(this.minDate) : '',\r\n                maxDate = this.maxDate ? this.getDate(this.maxDate) : '',\r\n                dateFormat = this.dateFormat ? this.getDateFormat(this.dateFormat) : 'x';\r\n            $(this.$el).on('blur', function () {\r\n                // if((minDate || maxDate) && $(this).val()) {\r\n                //     if(moment($(this).val(), dateFormat).format('x') < minDate) {\r\n                //         setTimeout(function() {\r\n                //             $(this.$el).datepicker(\"setDate\", new Date());\r\n                //             this.date = moment().format(dateFormat);\r\n\r\n                //             Alert.warning('Sorry, your selected date is not valid');\r\n                //         }, 100);\r\n                //     }\r\n                // }\r\n            });\r\n        },\r\n        getDateFormat(dateFormat) {\r\n            switch (dateFormat) {\r\n                case 'dd/mm/yy':\r\n                    return 'dd/mm/yyyy';\r\n                default:\r\n                    return 'x';\r\n            }\r\n        },\r\n        getDate(date) {\r\n            switch (date) {\r\n                case 'today':\r\n                    return moment().format('x');\r\n                default:\r\n                    return moment().format('x');\r\n            }\r\n        },\r\n        emitValue() {\r\n            this.date = $(this.$el).val();\r\n            if (!$(this.$el).val()) {\r\n                this.empty();\r\n            }\r\n            this.$emit('input', $(this.$el).val());\r\n            this.$emit('change', $(this.$el).val());\r\n\r\n        },\r\n        empty() {\r\n            $(this.$el).datepicker('setDate', null);\r\n            this.date = '';\r\n        },\r\n        refresh: function () {\r\n            var vm = this;\r\n            if (this.minDate === undefined) this.minDate = null\r\n            if (this.maxDate === undefined) this.maxDate = null\r\n            $(this.$el).datepicker(\"destroy\");\r\n            $(this.$el).datepicker({\r\n                dateFormat: this.dateFormat,\r\n                minDate: this.minDate,\r\n                maxDate: this.maxDate,\r\n                changeMonth: true,\r\n                onSelect: function (date) {\r\n                    vm.$emit('input', date);\r\n                }\r\n            })\r\n            $(this.$el).datepicker(\"refresh\");\r\n        }\r\n    },\r\n    watch: {\r\n        minDate: function (val) {\r\n            this.refresh()\r\n        },\r\n        maxDate: function (val) {\r\n            this.refresh()\r\n        },\r\n        date(val) {\r\n            this.$emit('input', val);\r\n            this.$emit('change', val);\r\n        }\r\n    },\r\n    beforeDestroy: function () {\r\n        $(this.$el).datepicker('hide').datepicker('destroy');\r\n    }\r\n});\r\n\r\n// var dateToday = new Date();\r\n// var dates = $(\"#from, #to\").datepicker({\r\n//     defaultDate: \"+1w\",\r\n//     changeMonth: true,\r\n//     numberOfMonths: 3,\r\n//     minDate: dateToday,\r\n//     onSelect: function(selectedDate) {\r\n//         var option = this.id == \"from\" ? \"minDate\" : \"maxDate\",\r\n//             instance = $(this).data(\"datepicker\"),\r\n//             date = $.datepicker.parseDate(instance.settings.dateFormat || $.datepicker._defaults.dateFormat, selectedDate, instance.settings);\r\n//         dates.not(this).datepicker(\"option\", option, date);\r\n//     }\r\n// });\r\n\r\n/*\r\n Vue.component('datepicker', {\r\n template: '<input/>',\r\n props: [ 'dateFormat','timestamp' ],\r\n mounted: function() {\r\n var vm = this;\r\n\r\n $(this.$el).datepicker({\r\n format: this.dateFormat,\r\n autoclose:true\r\n }).on('changeDate', function(date) {\r\n if(vm.timestamp){\r\n vm.$emit('input', date.timeStamp);\r\n }else{\r\n vm.$emit('input', date.format(vm.dateFormat));\r\n }\r\n });\r\n\r\n if(vm.timestamp && isNaN(this.$el.value)==false){\r\n $(this.$el).datepicker('setDate',moment(parseInt(this.$el.value)).toDate()).change()\r\n }\r\n },\r\n beforeDestroy: function() {\r\n $(this.$el).datepicker('hide').datepicker('destroy');\r\n }\r\n });\r\n */\r\n\r\n// ==================== Vue Timepicker\r\nVue.component('clockpicker', {\r\n    template: '<input :id=\"id\" :name=\"name\" @input=\"emitValue()\" :disabled=\"disabled\" />',\r\n    props: {\r\n        timeFormat: {\r\n            default() {\r\n                return 'h:i:s'\r\n            }\r\n        },\r\n        name: {\r\n            default() {\r\n                return 'clockpicker'\r\n            }\r\n        },\r\n        id: {\r\n            default() {\r\n                return 'clockpicker'\r\n            }\r\n        },\r\n        disabled: {\r\n            default() {\r\n                return false;\r\n            }\r\n        }\r\n    },\r\n    mounted: function () {\r\n        var vm = this\r\n        $(this.$el).clockpicker({\r\n            autoclose: true\r\n        }).on('change', function () {\r\n            if ($(vm.$el).val() != null) {\r\n                vm.$emit('input', $(vm.$el).val())\r\n            }\r\n        });\r\n    },\r\n    methods: {\r\n        emitValue() {\r\n            if (this.$el) {\r\n                this.$emit('input', $(this.$el).val());\r\n            }\r\n        }\r\n    },\r\n    beforeDestroy: function () {\r\n        $(this.$el).clockpicker('remove');\r\n    }\r\n});\r\n\r\nVue.component('timepicker2', {\r\n    template: `<input\r\n                :ref=\"id\"\r\n                :value=\"formattedValue\"\r\n                @input=\"emitValue()\"\r\n                @keydown=\"keydownHandler\"\r\n                :name=\"name\"\r\n                :id=\"id\"\r\n                :disabled=\"disabled\"/>`,\r\n    props: {\r\n        timeDisable: {\r\n            default() {\r\n                return []\r\n            }\r\n        },\r\n        interval: {\r\n            default() {\r\n                return 30;\r\n            }\r\n        },\r\n        name: {\r\n            default() {\r\n                return 'timepicker2'\r\n            }\r\n        },\r\n        id: {\r\n            default() {\r\n                return 'timepicker2'\r\n            }\r\n        },\r\n        disabled: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        minTime: {\r\n            default() {\r\n                return '0:00'\r\n            }\r\n        },\r\n        maxTime: {\r\n            default() {\r\n                return '23:30'\r\n            }\r\n        },\r\n        startTime: {\r\n            default() {\r\n                return '0:00'\r\n            }\r\n        },\r\n        timeFormat: {\r\n            default() {\r\n                return 'HH:i'\r\n            }\r\n        },\r\n        value: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        passData: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        formatSubmit: {\r\n            default() {\r\n                return ''\r\n            }\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n        }\r\n    },\r\n    mounted: function () {\r\n        const vm = this;\r\n        var picker = $(this.$el).pickatime(this.config).on('change', function () {\r\n            if ($(vm.$el).val()) {\r\n                vm.$emit('input', $(vm.$el).val())\r\n                vm.$emit('change', $(vm.$el).val(), vm.passData)\r\n            }\r\n        });\r\n    },\r\n    computed: {\r\n        formattedValue() {\r\n            let joinedValue = this.value,\r\n                timeFormat = this.timeFormat.replace('i', 'mm');\r\n            if (Array.isArray(this.value)) {\r\n                joinedValue = this.value.join(':');\r\n                return moment(joinedValue, 'H.m').format(timeFormat);\r\n            }\r\n            else if (((this.value || '').includes('AM') || (this.value || '').includes('PM')) && !(this.timeFormat || '').includes('A')) {\r\n                return moment(this.value, timeFormat + ' A').format(timeFormat);\r\n            }\r\n            else {\r\n                return this.value;\r\n            }\r\n\r\n        },\r\n        config() {\r\n            let config = {\r\n                twelvehour: this.twelvehour(),\r\n                interval: this.interval,\r\n                disable: this.timeDisable,\r\n                min: this.minTime,\r\n                max: this.maxTime,\r\n                format: this.timeFormat,\r\n                formatLabel: this.timeFormat,\r\n                formatSubmit: this.timeFormat\r\n            }\r\n            return config;\r\n        }\r\n    },\r\n    methods: {\r\n        twelvehour() {\r\n            if (this.timeFormat.includes('H')) {\r\n                return false;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        },\r\n        keydownHandler(e) {\r\n            if (e.which === 8) {\r\n                this.empty();\r\n                this.emitValue();\r\n            }\r\n        },\r\n        emitValue() {\r\n            const base = this;\r\n            this.$emit('input', $(this.$el).val());\r\n            this.$emit('change', $(this.$el).val(), base.passData);\r\n        },\r\n        empty() {\r\n            $(this.$el).val(null);\r\n        },\r\n        stop() {\r\n            var picker = $(vm.$el).pickatime('picker');\r\n            if (picker) {\r\n                picker.stop();\r\n            }\r\n        },\r\n        start() {\r\n            var picker = $(vm.$el).pickatime('picker');\r\n            if (picker) {\r\n                picker.start();\r\n            }\r\n        },\r\n        set(config = null) {\r\n            let configuration = config ? { ...this.config, ...config } : this.config;\r\n            var picker = $(this.$el).pickatime('picker')\r\n            picker.set('enable', true);\r\n            Vue.nextTick(function () {\r\n                picker.set(configuration);\r\n            });\r\n        },\r\n        select(value) {\r\n            var picker = $(this.$el).pickatime('picker')\r\n            Vue.nextTick(function () {\r\n                picker.set(this.config);\r\n                picker.set('select', value);\r\n            });\r\n        }\r\n\r\n    },\r\n    watch: {\r\n        disabled(val) {\r\n            if (val) {\r\n\r\n            }\r\n        },\r\n        timeDisable(val) {\r\n            this.set(this.config);\r\n        },\r\n        interval(val) {\r\n            this.set(this.config);\r\n        },\r\n        minTime(val) {\r\n            this.set(this.config);\r\n        },\r\n        maxTime(val) {\r\n            this.set(this.config);\r\n        },\r\n        startTime(val) {\r\n        },\r\n        timeFormat(val) {\r\n            this.set(this.config);\r\n        },\r\n        value(val) {\r\n            if (val) {\r\n                this.select(val);\r\n            }\r\n        },\r\n    },\r\n    beforeDestroy: function () {\r\n        $(this.$el).remove();\r\n    }\r\n});\r\n\r\nVue.component('datepicker2', {\r\n    template: `\r\n          <div class=\"datepicker-field\">\r\n            <button type=\"button\" class=\"btn btn btn-sm btn-default m-btn\" v-if=\"properties.navButton\">\r\n              <i class=\"fa fa-chevron-left\"/>\r\n            </button>\r\n            <div ref=\"dateRangePicker\" v-if=\"showRangeOptions || properties.showRangeOptions\" id=\"reportrange\" class=\"datepicker-field__range-input\">\r\n              <div class=\"datepicker-field__range-text\">\r\n                {{ rangeText }}\r\n              </div>      \r\n            </div>    \r\n            <div v-if=\"!showRangeOptions && !properties.showRangeOptions\">\r\n              <input\r\n                style=\"border: none; width: 100%;\"\r\n                ref=\"datepicker\"\r\n                class=\"\"\r\n                :value=\"value\"\r\n                @focus=\"onDaterangepickerFocusChange\"\r\n                :placeholder=\"placeholder\"\r\n                :class='inputClass'\r\n                :disabled='disabled'>\r\n            </div>\r\n            <button type=\"button\" class=\"btn btn btn-sm btn-default m-btn\" v-if=\"properties.navButton\">\r\n              <i class=\"fa fa-chevron-right\"/>\r\n            </button>\r\n          </div>`,\r\n    data() {\r\n        return {\r\n            date: '',\r\n            dateFormat: '',\r\n            autoUpdateInput: '',\r\n            maxDate: '',\r\n            showTimePicker: false,\r\n            refreshDatepicker: false,\r\n            timezone: '',\r\n            timeFormat: 'DD/MM/YYYY',\r\n            rangeText: '',\r\n        }\r\n    },\r\n    props: {\r\n        'value': {\r\n          default(){\r\n            return '';\r\n          }\r\n        },\r\n        'dataClass': {\r\n          default(){\r\n            return '';\r\n          }\r\n        },\r\n        'inputFormat': {\r\n          default(){\r\n            return false;\r\n          }\r\n        },\r\n        'outputFormat': {\r\n          default(){\r\n            return false;\r\n          }\r\n        },\r\n        'nullValue': {\r\n          default(){\r\n            return false;\r\n          }\r\n        },\r\n        'inputClass': {\r\n          default(){\r\n            return '';\r\n          }\r\n        },\r\n        'minValue': {\r\n          default(){\r\n            return false;\r\n          }\r\n        },\r\n        'minType': {\r\n          default(){\r\n            return false;\r\n          }\r\n        },\r\n        'timePicker': {\r\n          default(){\r\n            return false;\r\n          }\r\n        },\r\n        'minDate': {\r\n          default(){\r\n            return false;\r\n          }\r\n        },\r\n        'disabled': {\r\n          default(){\r\n            return false;\r\n          }\r\n        },\r\n        'showDropdowns': {\r\n            default() {\r\n                return true;\r\n            }\r\n        },\r\n        'showRangeOptions': {\r\n          default(){\r\n            return false;\r\n          }\r\n        },\r\n        'startTime': {\r\n          default(){\r\n            return false;\r\n          }\r\n        },\r\n        'dateMonthOnly': {\r\n          default(){\r\n            return false;\r\n          }\r\n        },\r\n        'properties': {\r\n          default(){\r\n            return {\r\n              showRangeOptions: false,\r\n              navButton: false,\r\n              fixedRange: 'day'\r\n            };\r\n          }\r\n        },\r\n        'autoclose': {\r\n            default() {\r\n                return true;\r\n            }\r\n        },\r\n        'autoApply': {\r\n            default() {\r\n                return true;\r\n            }\r\n        },\r\n        opens: {\r\n            default() {\r\n                return 'left'\r\n            }\r\n        },\r\n        drops: {\r\n            default() {\r\n                return 'down';\r\n            }\r\n        },\r\n        placeholder: {\r\n            default() {\r\n                return 'Select a date'; \r\n            }\r\n        },\r\n        maxChosenDate: {\r\n            default() {\r\n                return '';\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n\r\n    },\r\n  mounted() {\r\n\r\n    // moment.tz.setDefault(this.$getRegionLanguage.timezone); \r\n    this.dateFormat = this.inputFormat || 'DD/MM/YYYY';\r\n    if (this.timePicker) {\r\n      this.showTimePicker = true;\r\n     // this.dateFormat = `${this.$getRegionLanguage.dateFormat} ${\r\n     //    this.timeFormat\r\n     //  }`; \r\n    }\r\n    if(!this.maxChosenDate) {\r\n        if (this.minValue && this.minType) {\r\n          this.maxDate = moment().subtract(this.minValue, this.minType);\r\n        }\r\n    }\r\n    else {\r\n        this.maxDate = this.maxChosenDate; \r\n    }\r\n    this.setDate(this.value);\r\n    this.setDatepicker(this.value);\r\n  },\r\n  methods: {\r\n    onDaterangepickerFocusChange() {\r\n        this.refreshDatepicker = false;\r\n        setTimeout(()=> {\r\n            this.refreshDatepicker = true;\r\n        }, 50); \r\n    },\r\n    setDate(val) {\r\n      val = returnDate(val); \r\n      if (!this.showRangeOptions && !this.properties.showRangeOptions) {\r\n        const el = this.$refs.datepicker,\r\n          vm = this;\r\n        var dateValue = '';\r\n        if (!val || val == 'Invalid date') {\r\n          if (this.nullValue) {\r\n            vm.autoUpdateInput = false;\r\n            vm.date = moment().format(this.dateFormat);\r\n            $(el).val('');\r\n          } else {\r\n            vm.date = moment().format(this.dateFormat);\r\n            vm.autoUpdateInput = true;\r\n          }\r\n        } \r\n        else {\r\n          vm.autoUpdateInput = true;\r\n          if (this.outputFormat == this.dateFormat) {\r\n            vm.date = val;\r\n          } \r\n          else {\r\n            parseInt(val) == val ? (dateValue = parseInt(val)) : (dateValue = val);\r\n            vm.date = moment(dateValue, this.outputFormat).format(this.dateFormat);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    setDaterange() {\r\n        let el = this.$refs.dateRangePicker,\r\n          vm = this;\r\n        if(vm.value.startDate) {\r\n            $(el).data('daterangepicker').setStartDate(moment(vm.value.startDate, 'x').format(this.dateFormat));\r\n        }\r\n        if(vm.value.endDate) {\r\n            $(el).data('daterangepicker').setStartDate(moment(vm.value.endDate, 'x').format(this.dateFormat));\r\n        }\r\n    },\r\n    empty() {\r\n        this.setDate(null); \r\n        this.setDatepicker(null);\r\n    },\r\n    setDatepicker(setRange) {\r\n      if (this.showRangeOptions || this.properties.showRangeOptions) {\r\n\r\n        let el = this.$refs.dateRangePicker,\r\n          vm = this;\r\n        vm.rangeText =\r\n          moment(vm.value.startDate, 'x').format(vm.dateFormat) +\r\n          ' - ' +\r\n          moment(vm.value.endDate, 'x').format(vm.dateFormat);\r\n\r\n          if(setRange) {\r\n            vm.rangeText =\r\n              moment((setRange.start || setRange.startDate), (setRange.format || 'x')).format(vm.dateFormat) +\r\n              ' - ' +\r\n              moment((setRange.end || setRange.endDate), (setRange.format || 'x')).format(vm.dateFormat);\r\n          }\r\n\r\n          var dateValue = {\r\n            startDate: vm.value.startDate,\r\n            endDate: vm.value.startDate,\r\n          }\r\n          \r\n          if(setRange) {\r\n            dateValue = {\r\n              startDate: moment((setRange.start || setRange.startDate), (setRange.format || 'x')).format('x'),\r\n              endDate: moment((setRange.end || setRange.endDate), (setRange.format || 'x')).format('x'),\r\n            }\r\n          }\r\n\r\n        $(el).daterangepicker(\r\n          {\r\n            startDate: moment(dateValue.startDate, 'x').format(vm.dateFormat),\r\n            endDate: moment(dateValue.endDate, 'x').endOf('day').format(vm.dateFormat),\r\n            locale: {\r\n              format: vm.dateFormat,\r\n            },\r\n            // autoclose: !!(vm.autoclose),\r\n            autoApply: !!(vm.autoApply),\r\n            showDropdowns: !!(vm.showDropdowns),\r\n            ranges: {\r\n              Today: [moment(), moment().endOf('day')],\r\n              Yesterday: [moment().subtract(1, 'days'), moment().subtract(1, 'days').endOf('day')],\r\n              'Last 7 Days': [moment().subtract(6, 'days'), moment().endOf('day')],\r\n              'Last 30 Days': [moment().subtract(29, 'days'), moment().endOf('day')],\r\n              'This Month': [moment().startOf('month'), moment().endOf('month').endOf('day')],\r\n              'Last Month': [\r\n                moment()\r\n                  .subtract(1, 'month')\r\n                  .startOf('month'),\r\n                moment()\r\n                  .subtract(1, 'month')\r\n                  .endOf('month').endOf('day'),\r\n              ],\r\n            },\r\n            opens: vm.opens,\r\n            drops: vm.downs\r\n          },\r\n          function(start, end) {\r\n            let startDate = start.format(vm.dateFormat);\r\n            let endDate = end.format(vm.dateFormat);\r\n            let rangeDate = {\r\n              startDate: moment(startDate, vm.dateFormat).format('x'),\r\n              endDate: moment(endDate, vm.dateFormat).endOf('day').format('x'),\r\n            };\r\n            vm.rangeText = startDate + ' - ' + endDate;\r\n            vm.$emit('input', rangeDate);\r\n          },\r\n        );\r\n\r\n        $(el).trigger(\"apply.daterangepicker\");\r\n\r\n        $(el).on('apply.daterangepicker', function(ev, picker){\r\n            vm.setDate(vm.date);\r\n        });\r\n\r\n        $(el).on('showCalendar.daterangepicker', function(ev, picker) {\r\n          // $('.monthselect')\r\n          //   .select2({ minimumResultsForSearch: -1 })\r\n          //   .on('change', function() {\r\n          //     $('.monthselect').val($(this).val());\r\n          //   })\r\n          //   .trigger('change.select2');\r\n\r\n          // $('.yearselect')\r\n            // .select2({ minimumResultsForSearch: -1 })\r\n            // .on('change', function() {\r\n            //   $('.yearselect').val($(this).val());\r\n            // })\r\n            // .trigger('change.select2');\r\n\r\n\r\n          // if (\r\n          //   picker.element.offset().top - $(window).scrollTop() + picker.container.outerHeight() >\r\n          //   $(window).height()\r\n          // ) {\r\n          //   picker.drops = 'up';\r\n          // } else {\r\n          //   picker.drops = 'down';\r\n          // }\r\n        });\r\n\r\n        $(el).on('show.daterangepicker', (ev, picker)=> {\r\n        });\r\n\r\n         $(el).on('hide.daterangepicker', function(ev, picker) {\r\n        });\r\n\r\n        // $(el).on('hideCalendar.daterangepicker', (ev, picker)=> {\r\n        //     console.log('hideCalendar')\r\n        // });\r\n\r\n      } \r\n      else {        \r\n        const el = this.$refs.datepicker,\r\n          vm = this;\r\n        let maxDate = '';\r\n        let minDate = '';\r\n        let dateFormat = this.dateFormat;\r\n        let startDate = vm.value || vm.date;\r\n        \r\n        if (vm.startTime){\r\n          startDate = moment(startDate, `${vm.dateFormat} ${vm.timeFormat}`).format('DD-MM-YYYY');\r\n          startDate = moment(`${startDate} ${vm.startTime}`, `DD-MM-YYYY ${vm.timeFormat}`).format(`${vm.dateFormat} ${vm.timeFormat}`)\r\n        }\r\n        else{\r\n          startDate = vm.value || vm.date;\r\n        }\r\n        if(this.maxDate){\r\n          maxDate = moment(this.maxDate, 'x').format(this.dateFormat);\r\n        }\r\n        if(this.minDate){\r\n          minDate = moment(this.minDate, 'x').format(this.dateFormat);\r\n        }\r\n        if(this.dateMonthOnly){          \r\n          dateFormat = this.dayMonthFormat();\r\n          minDate = moment().startOf('years').format(this.dateFormat);\r\n          maxDate = moment().endOf('years').format(this.dateFormat);\r\n          startDate = moment(startDate, this.dateFormat).format(dateFormat);      \r\n        }\r\n        \r\n        $(el).daterangepicker(\r\n          {\r\n            timeZone: this.timezone,\r\n            timePicker: this.showTimePicker,\r\n            singleDatePicker: true,\r\n            singleClasses: this.dataClass,\r\n            // autoclose: !!(this.autoclose),\r\n            autoApply: !!(this.autoApply),\r\n            startDate: startDate,\r\n            ...(maxDate && {\r\n              maxDate: maxDate,\r\n            } || {}),\r\n            ...(minDate && {\r\n              minDate: minDate,\r\n            } || {}),\r\n            autoUpdateInput: this.autoUpdateInput,\r\n            showDropdowns: !!(this.showDropdowns),\r\n            locale: {\r\n              format: dateFormat,\r\n            },\r\n            drops: this.drops,\r\n            opens: this.opens,\r\n          },\r\n\r\n          function(start, end, label) {\r\n            if (vm.startTime){\r\n              start = start.format('DD-MM-YYYY');\r\n              start = moment(`${start} ${vm.startTime}`, `DD-MM-YYYY ${vm.timeFormat}`)\r\n            }else{\r\n              start = start.format('DD-MM-YYYY HH:mm');\r\n            }            \r\n            start = moment(start, 'DD-MM-YYYY HH:mm').format('x');\r\n            const outputFormat = vm.outputFormat || 'x';\r\n            let date = moment(start, 'x').format(this.dateFormat);\r\n            vm.$emit('input', moment(date, this.dateFormat).format(outputFormat));\r\n          },\r\n        );\r\n\r\n        $(el).trigger(\"apply.daterangepicker\");\r\n\r\n\r\n\r\n        $(el).on('apply.daterangepicker', function(ev, picker){\r\n            vm.setDate(vm.date);\r\n            vm.setDatepicker(vm.date);\r\n        });\r\n\r\n\r\n        $(el).on('showCalendar.daterangepicker', function(ev, picker) {\r\n\r\n          if(vm.dateMonthOnly){\r\n            vm.$nextTick(()=>{\r\n              let calendarSelectors = $('.daterangepicker thead .month .select2-container');\r\n              const thisYear = moment().format('YYYY');\r\n              const yearSelector = calendarSelectors.find(`:contains(${thisYear})`);\r\n              $(yearSelector).parent().css('display', 'none');\r\n              });\r\n          }\r\n          // $('.monthselect')\r\n          //   .select2({ minimumResultsForSearch: -1 })\r\n          //   .on('change', function() {\r\n          //     $('.monthselect').val($(this).val());\r\n          //   })\r\n          //   .trigger('change.select2');\r\n          // $('.yearselect')\r\n          //   .select2({ minimumResultsForSearch: -1 })\r\n          //   .on('change', function() {\r\n          //     $('.yearselect').val($(this).val());\r\n          //   })\r\n          //   .trigger('change.select2');\r\n\r\n          if (\r\n            picker.element.offset().top - $(window).scrollTop() + picker.container.outerHeight() >\r\n            $(window).height()\r\n          ) {\r\n            picker.drops = 'up';\r\n          } else {\r\n            picker.drops = 'down';\r\n          }\r\n        });\r\n      }\r\n      \r\n    },\r\n    dayMonthFormat(){\r\n      let format = 'DD/MM';\r\n      switch(this.dateFormat){\r\n        case 'YY/MM/DD': \r\n          format = 'MM/DD';\r\n        break;\r\n        case 'DD/MM/YYYY':\r\n          format = 'DD/MM';\r\n        break;\r\n        case 'DD/MM/YY':\r\n          format = 'DD/MM';\r\n        break;\r\n        case 'YYYY-MM-DD':\r\n          format = 'MM-DD';\r\n        break;\r\n        case 'DD-MMM-YY':\r\n          format = 'DD-MMM';\r\n        break;\r\n        case 'M/D/YYYY':\r\n          format = 'M/D';\r\n        break;\r\n        case 'M/D/YY':\r\n          format = 'M/D';\r\n        break;\r\n        case 'MM/DD/YY':\r\n          format = 'MM/DD';\r\n        break;\r\n        case 'MM/DD/YYYY':\r\n          format = 'MM/DD';\r\n        break;\r\n        default: \r\n        break;\r\n      }\r\n    return format;\r\n    }\r\n  },\r\n    watch: {\r\n        value(value) {\r\n          this.$emit('change', value);\r\n          if(!this.showRangeOptions) {\r\n            this.setDate(value);\r\n            this.setDatepicker({start: moment(value, this.outputFormat).format('x')}); \r\n          }\r\n          else {\r\n              this.setDate(value);\r\n              this.setDatepicker(value);\r\n          }\r\n        },\r\n    }\r\n});\r\n\r\nVue.component('dateRangePicker', {\r\n    template: `<div class='input-group'>\r\n    <input type='text' ref=\"daterange\" class=\"form-control m-input\" readonly  placeholder=\"Select date range\"/>\r\n    <span class=\"input-group-addon\">\r\n      <i class=\"la la-calendar-check-o\"></i>\r\n    </span>\r\n  </div>`,\r\n    props: ['startDate', 'endDate'],\r\n    data() {\r\n      return {\r\n        start: this.startDate,\r\n        end: this.endDate\r\n      }\r\n    },\r\n    mounted: function() {\r\n      $(this.$refs.daterange)\r\n        .daterangepicker({\r\n          buttonClasses: 'm-btn btn',\r\n          applyClass: 'btn-primary',\r\n          cancelClass: 'btn-secondary',\r\n          showDropdowns: true\r\n        })\r\n        .on('apply.daterangepicker', (e, picker) => {\r\n          this.$emit('apply', picker.startDate, picker.endDate);\r\n          this.start = picker.startDate;\r\n          this.end = picker.endDate;\r\n        });\r\n    }\r\n})\r\n\r\n\r\nVue.component('timepicker', {\r\n    template: `<input\r\n                :ref=\"id\"\r\n                :value=\"formattedValue\"\r\n                @input=\"emitValue()\"\r\n                @keydown=\"keydownHandler\"\r\n                :name=\"name\"\r\n                :id=\"id\"\r\n                :disabled=\"disabled\"/>`,\r\n    props: {\r\n        timeDisable: {\r\n            default() {\r\n                return []\r\n            }\r\n        },\r\n        interval: {\r\n            default() {\r\n                return 30;\r\n            }\r\n        },\r\n        name: {\r\n            default() {\r\n                return 'timepicker'\r\n            }\r\n        },\r\n        id: {\r\n            default() {\r\n                return 'timepicker'\r\n            }\r\n        },\r\n        disabled: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        minTime: {\r\n            default() {\r\n                return '0:00'\r\n            }\r\n        },\r\n        maxTime: {\r\n            default() {\r\n                return '23:30'\r\n            }\r\n        },\r\n        startTime: {\r\n            default() {\r\n                return '0:00'\r\n            }\r\n        },\r\n        timeFormat: {\r\n            default() {\r\n                return 'hh:i A'\r\n            }\r\n        },\r\n        value: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        passData: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        formatSubmit: {\r\n            default() {\r\n                return ''\r\n            }\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n        }\r\n    },\r\n    mounted: function () {\r\n        var vm = this;\r\n        $(vm.$el).pickatime().on('change', function () {\r\n            if ($(vm.$el).val()) {\r\n                vm.$emit('input', $(vm.$el).val())\r\n                vm.$emit('change', $(vm.$el).val(), vm.passData)\r\n            }\r\n        });\r\n    },\r\n    computed: {\r\n        formattedValue() {\r\n            let joinedValue = this.value,\r\n                timeFormat = this.timeFormat.replace('i', 'mm');\r\n            if (Array.isArray(this.value)) {\r\n                joinedValue = this.value.join(':');\r\n                return moment(joinedValue, 'H.m').format(timeFormat);\r\n            }\r\n            else {\r\n                return this.value;\r\n            }\r\n\r\n        },\r\n        config() {\r\n            let config = {\r\n                twelvehour: this.twelvehour(),\r\n                interval: this.interval,\r\n                disable: this.timeDisable,\r\n                min: this.minTime,\r\n                max: this.maxTime,\r\n                format: this.timeFormat,\r\n                formatLabel: this.timeFormat,\r\n            }\r\n            if (this.formatSubmit) {\r\n                config['formatSubmit'] = this.formatSubmit;\r\n            }\r\n            return config;\r\n        }\r\n    },\r\n    methods: {\r\n        twelvehour() {\r\n            if (this.timeFormat.includes('H')) {\r\n                return false;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        },\r\n        keydownHandler(e) {\r\n            if (e.which === 8) {\r\n                this.empty();\r\n                this.emitValue();\r\n            }\r\n        },\r\n        emitValue() {\r\n            const base = this;\r\n            this.$emit('input', $(this.$el).val());\r\n            this.$emit('change', $(this.$el).val(), base.passData);\r\n        },\r\n        empty() {\r\n            $(this.$el).val(null);\r\n        },\r\n        stop() {\r\n            var picker = $(vm.$el).pickatime('picker');\r\n            if (picker) {\r\n                picker.stop();\r\n            }\r\n        },\r\n        start() {\r\n            var picker = $(vm.$el).pickatime('picker');\r\n            if (picker) {\r\n                picker.start();\r\n            }\r\n        },\r\n        set(config = null) {\r\n            let configuration = config ? { ...this.config, ...config } : this.config;\r\n            var picker = $(this.$el).pickatime('picker')\r\n            picker.set('enable', true);\r\n            Vue.nextTick(function () {\r\n                picker.set(configuration);\r\n            });\r\n        },\r\n        select(value) {\r\n            var picker = $(this.$el).pickatime('picker')\r\n            Vue.nextTick(function () {\r\n                picker.set(this.config);\r\n                picker.set('select', value);\r\n            });\r\n        }\r\n\r\n    },\r\n    watch: {\r\n        disabled(val) {\r\n            if (val) {\r\n\r\n            }\r\n        },\r\n        timeDisable(val) {\r\n            this.set(this.config);\r\n        },\r\n        interval(val) {\r\n            this.set(this.config);\r\n        },\r\n        minTime(val) {\r\n            this.set(this.config);\r\n        },\r\n        maxTime(val) {\r\n            this.set(this.config);\r\n        },\r\n        startTime(val) {\r\n        },\r\n        timeFormat(val) {\r\n            this.set(this.config);\r\n        },\r\n        value(val) {\r\n            if (val) {\r\n                this.select(val);\r\n            }\r\n        },\r\n    },\r\n    beforeDestroy: function () {\r\n        $(this.$el).remove();\r\n    }\r\n});\r\n\r\n\r\n\r\n// ==================== Vue Bootstrap Switch\r\nvar switchComponent = Vue.component('bootstrapswitch', {\r\n    template: '<input type=\"checkbox\" data-off-color=\"danger\" data-on-text=\"Yes\" data-off-text=\"No\" class=\"form-control\" style=\"display: block\"/>',\r\n    props: ['value'],\r\n    mounted: function () {\r\n        var vm = this;\r\n        $(this.$el).bootstrapSwitch('state', vm.value);\r\n        $(this.$el).on('switchChange.bootstrapSwitch', function (event, state) {\r\n            vm.$emit('input', state);\r\n        });\r\n    },\r\n    beforeDestroy: function () {\r\n        $(this.$el).remove();\r\n    }\r\n});\r\n\r\n// ==================== Vue Editor\r\nVue.component('editor', {\r\n    template: '<div/>',\r\n    props: ['value'],\r\n    mounted: function () {\r\n        var vm = this\r\n        $(this.$el).summernote({\r\n            map: {\r\n                apiKey: 'AIzaSyBfmjvP87sxKNqEfA7JnL9L8dxy1_KodWQ',\r\n                // This will be used when map is initialized in the dialog.\r\n                center: {\r\n                    lat: 1.3521,\r\n                    lng: 103.8198\r\n                },\r\n                zoom: 13\r\n            },\r\n            toolbar: [\r\n                ['font', ['fontname', 'fontsize', 'color', 'bold', 'italic', 'underline',\r\n                    'strikethrough', 'superscript', 'subscript', 'clear']],\r\n                ['paragraph', ['style', 'ol', 'ul', 'paragraph', 'height']],\r\n                ['insert', ['picture', 'link', 'video', 'table', 'hr', 'map', 'videoAttributes']],\r\n                ['misc', ['fullscreen', 'codeview', 'undo', 'redo', 'help']]\r\n\r\n            ],\r\n            maximumImageFileSize: 2097152,\r\n            callbacks: {\r\n                onImageUpload: function (image) {\r\n                    var sizeKB = image[0]['size'];\r\n                    var tmp_pr = 0;\r\n                    if (sizeKB > 2097152) {\r\n                        tmp_pr = 1;\r\n                        Alert.error(\"Please select image less then 2Mb.\");\r\n                    }\r\n                    /*if(image[0]['type'] != 'image/jpeg' && image[0]['type'] != 'image/png'){\r\n                        tmp_pr = 1;\r\n                        alert(\"pls, select png or jpg image.\");\r\n                    }*/\r\n                    if (tmp_pr == 0) {\r\n                        var file = image[0];\r\n                        var reader = new FileReader();\r\n                        reader.onloadend = function () {\r\n                            var image = $('<img>').attr('src', reader.result);\r\n                            $(vm.$el).summernote(\"insertNode\", image[0]);\r\n                        }\r\n                        reader.readAsDataURL(file);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        $(this.$el).summernote('code', this.value);\r\n        $(this.$el).on('summernote.change', function (we, contents, $editable) {\r\n            vm.$emit('input', contents);\r\n        });\r\n    },\r\n    beforeDestroy: function () {\r\n        $(this.$el).summernote('destroy');\r\n    }\r\n});\r\n\r\n// ==================== Vue Editor\r\nVue.component('tags', {\r\n    template: '<input type=\"text\"/>',\r\n    props: [],\r\n    mounted: function () {\r\n        var vm = this\r\n        $(this.$el).tokenfield()\r\n            .on('tokenfield:createdtoken', function (e) {\r\n                var data = $(this).tokenfield('getTokens').map(function (data) {\r\n                    return data.value;\r\n                });\r\n                vm.$emit('input', data)\r\n\r\n            })\r\n            .on('tokenfield:removedtoken', function (e) {\r\n                var data = $(this).tokenfield('getTokens').map(function (data) {\r\n                    return data.value;\r\n                });\r\n                vm.$emit('input', data)\r\n            })\r\n    },\r\n    beforeDestroy: function () {\r\n        $(this.$el).tokenfield('destroy');\r\n    }\r\n});\r\n\r\n// ==================== Vue Color Picker\r\nVue.component('color', {\r\n    template: '<input/>',\r\n    props: [],\r\n    mounted: function () {\r\n        var vm = this\r\n        var demoPalette = [\r\n            [\"#000\", \"#444\", \"#666\", \"#999\", \"#ccc\", \"#eee\", \"#f3f3f3\", \"#fff\"],\r\n            [\"#f00\", \"#f90\", \"#ff0\", \"#0f0\", \"#0ff\", \"#00f\", \"#90f\", \"#f0f\"],\r\n            [\"#f4cccc\", \"#fce5cd\", \"#fff2cc\", \"#d9ead3\", \"#d0e0e3\", \"#cfe2f3\", \"#d9d2e9\", \"#ead1dc\"],\r\n            [\"#ea9999\", \"#f9cb9c\", \"#ffe599\", \"#b6d7a8\", \"#a2c4c9\", \"#9fc5e8\", \"#b4a7d6\", \"#d5a6bd\"],\r\n            [\"#e06666\", \"#f6b26b\", \"#ffd966\", \"#93c47d\", \"#76a5af\", \"#6fa8dc\", \"#8e7cc3\", \"#c27ba0\"],\r\n            [\"#c00\", \"#e69138\", \"#f1c232\", \"#6aa84f\", \"#45818e\", \"#3d85c6\", \"#674ea7\", \"#a64d79\"],\r\n            [\"#900\", \"#b45f06\", \"#bf9000\", \"#38761d\", \"#134f5c\", \"#0b5394\", \"#351c75\", \"#741b47\"],\r\n            [\"#600\", \"#783f04\", \"#7f6000\", \"#274e13\", \"#0c343d\", \"#073763\", \"#20124d\", \"#4c1130\"]\r\n        ];\r\n        $(this.$el).spectrum({\r\n            showPalette: true,\r\n            palette: demoPalette,\r\n            change: function (c) {\r\n                vm.$emit('input', c.toHexString())\r\n            }\r\n        });\r\n    },\r\n    beforeDestroy: function () {\r\n        $(this.$el).remove();\r\n    }\r\n});\r\n\r\n\r\n// ==================== Vue Jquery Multiselect\r\nVue.component('multiselect', {\r\n    template: '<div style=\"position: relative;\">' +\r\n        '<select id=\"keep-order\" multiple=\"multiple\" ref=\"multiselectEl\" style=\"display:none\">' +\r\n        '<template v-for=\"option in options\">' +\r\n        '<option :value=\"option.id\" :key=\"option.id\">{{option.prefix}} {{option.text}}</option>' +\r\n        '</template>' +\r\n        '</select>' +\r\n        '<div class=\"m-arrow arrow-top\">' +\r\n        '<button type=\"button\" class=\"btn btn-sm btn-secondary\" id=\"forward\" title=\"Select All\" @click=\"selectAll()\"><i class=\" icon-arrow-right14\"></i></button>' +\r\n        '</div>' +\r\n        '<div class=\"m-arrow arrow-bottom\">' +\r\n        '<button type=\"button\" class=\"btn btn-sm btn-secondary\" id=\"forward\" title=\"Deselect All\" @click=\"deselectAll()\"><i class=\"icon-arrow-left13\"></i></button>' +\r\n        '</div>' +\r\n        '<div class=\"m-form\" v-show=\"showCount\"><span class=\"m-form__help\" v-text=\"countSelection\"></span></div>' +\r\n        '</div>',\r\n\r\n    props: ['options', 'value'],\r\n    data() {\r\n        var vm = this;\r\n        return {\r\n            countSelection: '',\r\n            showCount: false,\r\n            config: {\r\n                enableFiltering: true,\r\n                enableCaseInsensitiveFiltering: true,\r\n                enableFullValueFiltering: true,\r\n                selectableHeader:\r\n                    \"<input type='text' class='search-input form-control m-input' autocomplete='off' placeholder='Search...'>\",\r\n                selectionHeader:\r\n                    \"<input type='text' class='search-input form-control m-input' autocomplete='off' placeholder='Search...'>\",\r\n                afterInit: function (ms) {\r\n                    var that = this,\r\n                        $selectableSearch = that.$selectableUl.prev(),\r\n                        $selectionSearch = that.$selectionUl.prev(),\r\n                        selectableSearchString =\r\n                            '#' + that.$container.attr('id') + ' .ms-elem-selectable:not(.ms-selected)',\r\n                        selectionSearchString =\r\n                            '#' + that.$container.attr('id') + ' .ms-elem-selection.ms-selected';\r\n                    $('.ms-selectable .ms-list')\r\n                        .find('li')\r\n                        .filter(function (index) {\r\n                            let text = $(this)\r\n                                .text()\r\n                                .split(' ');\r\n                            let id = text[0];\r\n                            _.pull(text, text[0]);\r\n                            let newText = _.join(text, ' ');\r\n                            $(this).text(newText);\r\n                            $(this).append(`<span style=\"display:none\">` + id + `<span>`);\r\n                        });\r\n                    that.qs1 = $selectableSearch\r\n                        .quicksearch(selectableSearchString)\r\n                        .on('keydown', function (e) {\r\n                            if (e.which === 40) {\r\n                                that.$selectableUl.focus();\r\n                                return false;\r\n                            }\r\n                        });\r\n                    $('.ms-selection .ms-list')\r\n                        .find('li')\r\n                        .filter(function (index) {\r\n                            let text = $(this)\r\n                                .text()\r\n                                .split(' ');\r\n                            let id = text[0];\r\n                            _.pull(text, text[0]);\r\n                            let newText = _.join(text, ' ');\r\n                            $(this).text(newText);\r\n                            $(this).append(`<span style=\"display:none\">` + id + `<span>`);\r\n                        });\r\n                    that.qs2 = $selectionSearch.quicksearch(selectionSearchString).on('keydown', function (e) {\r\n                        if (e.which == 40) {\r\n                            that.$selectionUl.focus();\r\n                            return false;\r\n                        }\r\n                    });\r\n                },\r\n                afterSelect: function () {\r\n                    this.qs1.cache();\r\n                    this.qs2.cache();\r\n                    vm.$emit('input', $(vm.$refs.multiselectEl).val());\r\n                },\r\n                afterDeselect: function () {\r\n                    this.qs1.cache();\r\n                    this.qs2.cache();\r\n                    vm.$emit('input', $(vm.$refs.multiselectEl).val());\r\n                },\r\n            },\r\n        };\r\n    },\r\n    mounted: function () {\r\n        var vm = this;\r\n        $(this.$refs.multiselectEl);\r\n        $(this.$refs.multiselectEl).multiSelect(this.config);\r\n        this.$on('deselect', (items) => {\r\n            $(this.$refs.multiselectEl).multiSelect('deselect', items);\r\n        });\r\n        $(this.$refs.multiselectEl).multiSelect('refresh');\r\n        $(this.$refs.multiselectEl).multiSelect('select', this.value);\r\n    },\r\n    methods: {\r\n        selectAll() {\r\n            $(this.$refs.multiselectEl).multiSelect('select_all');\r\n        },\r\n        deselectAll() {\r\n            $(this.$refs.multiselectEl).multiSelect('deselect_all');\r\n        },\r\n    },\r\n    watch: {\r\n        options: function (value) {\r\n            $(this.$refs.multiselectEl).multiSelect('destroy');\r\n            this.$nextTick(() => $(this.$refs.multiselectEl).multiSelect(this.config));\r\n        },\r\n        value: function (value) {\r\n            if (value == 0 || value == null) {\r\n                this.countSelection = '';\r\n                this.showCount = false;\r\n            } else {\r\n                this.countSelection = value.length + ' data selected';\r\n                this.showCount = true;\r\n            }\r\n        },\r\n    },\r\n    beforeDestroy() {\r\n        this.$off('deselect');\r\n    }\r\n});\r\n\r\n// ==================== Vue Cropper\r\nVue.component('cropper', {\r\n    render(h) {\r\n        return h('div', { style: this.containerStyle }, [\r\n            h('img', {\r\n                ref: 'img',\r\n                attrs: {\r\n                    src: this.src,\r\n                    alt: this.alt || 'image',\r\n                    style: 'max-width: 100%'\r\n                },\r\n                style: this.imgStyle\r\n            })\r\n        ]);\r\n    },\r\n    props: {\r\n        // Library props\r\n        'containerStyle': Object,\r\n        'src': {\r\n            type: String,\r\n            default: ''\r\n        },\r\n        'alt': String,\r\n        'imgStyle': Object,\r\n\r\n        // CropperJS props\r\n        'viewMode': Number,\r\n        'dragMode': String,\r\n        'aspectRatio': Number,\r\n        'data': Object,\r\n        'preview': String,\r\n        'responsive': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'restore': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'checkCrossOrigin': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'checkOrientation': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'modal': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'guides': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'center': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'highlight': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'background': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'autoCrop': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'autoCropArea': Number,\r\n        'movable': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'rotatable': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'scalable': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'zoomable': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'zoomOnTouch': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'zoomOnWheel': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'wheelZoomRatio': Number,\r\n        'cropBoxMovable': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'cropBoxResizable': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        'toggleDragModeOnDblclick': {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n\r\n        // Size limitation\r\n        'minCanvasWidth': Number,\r\n        'minCanvasHeight': Number,\r\n        'minCropBoxWidth': Number,\r\n        'minCropBoxHeight': Number,\r\n        'minContainerWidth': Number,\r\n        'minContainerHeight': Number,\r\n\r\n        // callbacks\r\n        'ready': Function,\r\n        'cropstart': Function,\r\n        'cropmove': Function,\r\n        'cropend': Function,\r\n        'crop': Function,\r\n        'zoom': Function\r\n    },\r\n    mounted() {\r\n        var Cropper = window.Cropper;\r\n\r\n        const { containerStyle, src, alt, imgStyle, ...data } = this.$options.props;\r\n        const props = {};\r\n\r\n        for (const key in data) {\r\n            if (this[key] !== undefined) {\r\n                props[key] = this[key];\r\n            }\r\n        }\r\n\r\n        this.cropper = new Cropper(this.$refs.img, props);\r\n    },\r\n    methods: {\r\n        // Reset the image and crop box to their initial states\r\n        reset() {\r\n            return this.cropper.reset();\r\n        },\r\n\r\n        // Clear the crop box\r\n        clear() {\r\n            return this.cropper.clear();\r\n        },\r\n\r\n        /**\r\n         * Replace the image's src and rebuild the cropper\r\n         * @param {string} url - The new URL.\r\n         * @param {boolean} [onlyColorChanged] - Indicate if the new image only changed color.\r\n         * @returns {Object} this\r\n         */\r\n        replace(url, onlyColorChanged = false) {\r\n            return this.cropper.replace(url, onlyColorChanged);\r\n        },\r\n\r\n        // Enable (unfreeze) the cropper\r\n        enable() {\r\n            return this.cropper.enable();\r\n        },\r\n\r\n        // Disable (freeze) the cropper\r\n        disable() {\r\n            return this.cropper.disable();\r\n        },\r\n\r\n        // Destroy the cropper and remove the instance from the image\r\n        destroy() {\r\n            return this.cropper.destroy();\r\n        },\r\n\r\n        /**\r\n         * Move the canvas with relative offsets\r\n         * @param {number} offsetX - The relative offset distance on the x-axis.\r\n         * @param {number} offsetY - The relative offset distance on the y-axis.\r\n         * @returns {Object} this\r\n         */\r\n        move(offsetX, offsetY) {\r\n            return this.cropper.move(offsetX, offsetY);\r\n        },\r\n\r\n        /**\r\n         * Move the canvas to an absolute point\r\n         * @param {number} x - The x-axis coordinate.\r\n         * @param {number} [y=x] - The y-axis coordinate.\r\n         * @returns {Object} this\r\n         */\r\n        moveTo(x, y = x) {\r\n            return this.cropper.moveTo(x, y);\r\n        },\r\n\r\n        /**\r\n         * Zoom the canvas with a relative ratio\r\n         * @param {number} ratio - The target ratio.\r\n         * @param {Event} _originalEvent - The original event if any.\r\n         * @returns {Object} this\r\n         */\r\n        relativeZoom(ratio, _originalEvent) {\r\n            return this.cropper.zoom(ratio, _originalEvent);\r\n        },\r\n\r\n        /**\r\n         * Zoom the canvas to an absolute ratio\r\n         * @param {number} ratio - The target ratio.\r\n         * @param {Event} _originalEvent - The original event if any.\r\n         * @returns {Object} this\r\n         */\r\n        zoomTo(ratio, _originalEvent) {\r\n            return this.cropper.zoomTo(ratio, _originalEvent);\r\n        },\r\n\r\n        /**\r\n         * Rotate the canvas with a relative degree\r\n         * @param {number} degree - The rotate degree.\r\n         * @returns {Object} this\r\n         */\r\n        rotate(degree) {\r\n            return this.cropper.rotate(degree);\r\n        },\r\n\r\n        /**\r\n         * Rotate the canvas to an absolute degree\r\n         * @param {number} degree - The rotate degree.\r\n         * @returns {Object} this\r\n         */\r\n        rotateTo(degree) {\r\n            return this.cropper.rotateTo(degree);\r\n        },\r\n\r\n        /**\r\n         * Scale the image on the x-axis.\r\n         * @param {number} scaleX - The scale ratio on the x-axis.\r\n         * @returns {Object} this\r\n         */\r\n        scaleX(scaleX) {\r\n            return this.cropper.scaleX(scaleX);\r\n        },\r\n\r\n        /**\r\n         * Scale the image on the y-axis.\r\n         * @param {number} scaleY - The scale ratio on the y-axis.\r\n         * @returns {Object} this\r\n         */\r\n        scaleY(scaleY) {\r\n            return this.cropper.scaleY(scaleY);\r\n        },\r\n\r\n        /**\r\n         * Scale the image\r\n         * @param {number} scaleX - The scale ratio on the x-axis.\r\n         * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\r\n         * @returns {Object} this\r\n         */\r\n        scale(scaleX, scaleY = scaleX) {\r\n            return this.cropper.scale(scaleX, scaleY);\r\n        },\r\n\r\n        /**\r\n         * Get the cropped area position and size data (base on the original image)\r\n         * @param {boolean} [rounded=false] - Indicate if round the data values or not.\r\n         * @returns {Object} The result cropped data.\r\n         */\r\n        getData(rounded = false) {\r\n            return this.cropper.getData(rounded);\r\n        },\r\n\r\n        /**\r\n         * Set the cropped area position and size with new data\r\n         * @param {Object} data - The new data.\r\n         * @returns {Object} this\r\n         */\r\n        setData(data) {\r\n            return this.cropper.setData(data);\r\n        },\r\n\r\n        /**\r\n         * Get the container size data.\r\n         * @returns {Object} The result container data.\r\n         */\r\n        getContainerData() {\r\n            return this.cropper.getContainerData();\r\n        },\r\n\r\n        /**\r\n         * Get the image position and size data.\r\n         * @returns {Object} The result image data.\r\n         */\r\n        getImageData() {\r\n            return this.cropper.getImageData();\r\n        },\r\n\r\n        /**\r\n         * Get the canvas position and size data.\r\n         * @returns {Object} The result canvas data.\r\n         */\r\n        getCanvasData() {\r\n            return this.cropper.getCanvasData();\r\n        },\r\n\r\n        /**\r\n         * Set the canvas position and size with new data.\r\n         * @param {Object} data - The new canvas data.\r\n         * @returns {Object} this\r\n         */\r\n        setCanvasData(data) {\r\n            return this.cropper.setCanvasData(data);\r\n        },\r\n\r\n        /**\r\n         * Get the crop box position and size data.\r\n         * @returns {Object} The result crop box data.\r\n         */\r\n        getCropBoxData() {\r\n            return this.cropper.getCropBoxData();\r\n        },\r\n\r\n        /**\r\n         * Set the crop box position and size with new data.\r\n         * @param {Object} data - The new crop box data.\r\n         * @returns {Object} this\r\n         */\r\n        setCropBoxData(data) {\r\n            return this.cropper.setCropBoxData(data);\r\n        },\r\n\r\n        /**\r\n         * Get a canvas drawn the cropped image.\r\n         * @param {Object} [options={}] - The config options.\r\n         * @returns {HTMLCanvasElement} - The result canvas.\r\n         */\r\n        getCroppedCanvas(options = {}) {\r\n            return this.cropper.getCroppedCanvas(options);\r\n        },\r\n\r\n        /**\r\n         * Change the aspect ratio of the crop box.\r\n         * @param {number} aspectRatio - The new aspect ratio.\r\n         * @returns {Object} this\r\n         */\r\n        setAspectRatio(aspectRatio) {\r\n            return this.cropper.setAspectRatio(aspectRatio);\r\n        },\r\n\r\n        /**\r\n         * Change the drag mode.\r\n         * @param {string} mode - The new drag mode.\r\n         * @returns {Object} this\r\n         */\r\n        setDragMode(mode) {\r\n            return this.cropper.setDragMode(mode);\r\n        }\r\n    }\r\n    // ,\r\n    // beforeDestroy: function() {\r\n    //     $(this.cropper).destroy();\r\n    // }\r\n})\r\n\r\n// ==================== Vue Radio Button\r\n/*Vue.component('radiobutton', {\r\n    template: '<input/>',\r\n    props: [ 'color', 'value' ],\r\n    mounted: function() {\r\n        var vm = this;\r\n        $(this.$el).uniform({\r\n            radioClass: 'choice',\r\n            wrapperClass: \"border-slate-400 text-slate-400\"\r\n        }).on(\"change\", function(){\r\n            vm.$emit('input', $(vm.$el).val());\r\n            console.log($(vm.$el).val());\r\n            $.uniform.update();\r\n            if ( $(vm.$el).is(\":checked\") ) {\r\n                $(vm.$el).attr(\"checked\", \"checked\");\r\n                $(vm.$el).parent().addClass(\"checked\");\r\n            } else {\r\n                $(vm.$el).removeAttr(\"checked\");\r\n                $(vm.$el).parent().removeClass(\"checked\");\r\n            }\r\n        });\r\n    },\r\n    beforeDestroy: function() {\r\n        $(this.$el).remove();\r\n    }\r\n});*/\r\n\r\n/*\r\n String\r\n Number\r\n Boolean\r\n Function\r\n Object\r\n Array\r\n Symbol\r\n */\r\n\r\nVue.component('customfield', {\r\n    render: function (createElement) {\r\n        var element = [];\r\n        var vm = this;\r\n        this.custom.map(function (field) {\r\n            var component = [createElement('label', field.name)];\r\n            switch (field.type) {\r\n                case \"select\":\r\n                    var attrs = {\r\n                        name: 'customfield[' + field._id + ']',\r\n                        id: field._id,\r\n                        placeholder: field.description,\r\n                        value: field.value\r\n                    };\r\n                    if (field.multiple) {\r\n                        attrs.multiple = \"multiple\";\r\n                        attrs.name = 'customfield[' + field._id + '][]';\r\n                    }\r\n\r\n                    component.push(createElement(Select2Component, {\r\n                        attrs: attrs,\r\n                        props: {\r\n                            options: field.options,\r\n                            value: field.value\r\n                        },\r\n                        on: {\r\n                            input: function (event) {\r\n                                field.value = event\r\n                            }\r\n                        }\r\n                    }));\r\n                    break;\r\n                case \"datepicker\":\r\n                    component.push(createElement(DatepickerComponent, {\r\n                        attrs: {\r\n                            name: 'customfield[' + field._id + ']',\r\n                            class: \"form-control\",\r\n                            id: field._id,\r\n                            placeholder: field.description,\r\n                            value: field.value\r\n                        },\r\n                        props: {\r\n                            dateFormat: 'dd/mm/yy',\r\n                            value: field.value\r\n                        },\r\n                        on: {\r\n                            input: function (event) {\r\n                                field.value = event\r\n                            }\r\n                        }\r\n                    }));\r\n                    break;\r\n                case \"text\":\r\n                case \"number\":\r\n                case \"password\":\r\n                    component.push(createElement('input', {\r\n                        attrs: {\r\n                            name: 'customfield[' + field._id + ']',\r\n                            class: \"form-control\",\r\n                            id: field._id,\r\n                            placeholder: field.description,\r\n                            value: field.value,\r\n                            type: field.type\r\n                        },\r\n                        on: {\r\n                            input: function (event) {\r\n                                field.value = event.target.value\r\n                            }\r\n                        }\r\n                    }));\r\n                    break;\r\n                case \"textarea\":\r\n                    component.push(createElement('textarea', {\r\n                        attrs: {\r\n                            name: 'customfield[' + field._id + ']',\r\n                            class: \"form-control\",\r\n                            id: field._id,\r\n                            placeholder: field.description,\r\n                            value: field.value\r\n                        },\r\n                        on: {\r\n                            input: function (event) {\r\n                                field.value = event.target.value\r\n                            }\r\n                        }\r\n                    }));\r\n                    break;\r\n                // default:\r\n            }\r\n\r\n            var customField = createElement('div', {\r\n                attrs: {\r\n                    class: vm.dividerClass\r\n                }\r\n            }, component);\r\n            element.push(customField);\r\n\r\n\r\n\r\n        })\r\n\r\n        return createElement('div', {\r\n            attrs: {\r\n                class: \"row\"\r\n            }\r\n        }, element)\r\n    },\r\n    props: {\r\n        custom: {\r\n            type: Array,\r\n            required: true\r\n        },\r\n        dividerClass: {\r\n            type: String,\r\n            required: true\r\n        }\r\n    }\r\n});\r\n\r\nVue.component('dropdownButton', {\r\n    template: `\r\n                <div class=\"dropdown--wrapper\" :class=\"dropdownWrapper\"  style=\"width: fit-content; \">\r\n                    <div class=\"dropdown\">\r\n                        <button\r\n                            type=\"button\"\r\n                            @click=\"emitClick('click')\"\r\n                            :name=\"buttonName\"\r\n                            class=\"btn\"\r\n                            :class=\"buttonClass\"\r\n                            :disabled=\"disabled\"\r\n                            data-toggle=\"dropdown\"\r\n                            aria-expanded=\"true\">\r\n                            {{ buttonText }}\r\n\r\n                            <i :class=\"buttonIcon\"></i>\r\n                        </button>\r\n                        <ul class=\"dropdown-menu dropdown-menu-center\">\r\n                            <li v-for=\"(option, idx) in options\" @click=\"selectOption(option)\">\r\n                                <a href=\"javascript:;\" :id=\"'option-link_'+option.id\">\r\n                                    <i v-if=\"option.icon\" :class=\"option.icon\"></i>\r\n                                    <span v-text=\"option.text\"></span>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>`,\r\n    props: {\r\n        buttonName: {\r\n            default() {\r\n                return 'dropdownButton';\r\n            }\r\n        },\r\n        buttonText: {\r\n            default() {\r\n                return 'Options';\r\n            }\r\n        },\r\n        buttonClass: {\r\n            default() {\r\n                return 'btn-primary';\r\n            }\r\n        },\r\n        dropdownWrapper: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        buttonIcon: {\r\n            default() {\r\n                return 'caret';\r\n            }\r\n        },\r\n        disabled: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        options: {\r\n            /*\r\n                [{\r\n                    id: '',\r\n                    icon: '',\r\n                    text: ''\r\n                }]\r\n            */\r\n            default() {\r\n                return [];\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        emitClick() {\r\n            this.$emit('click', this.buttonName);\r\n        },\r\n        selectOption(option) {\r\n            this.$emit('selected', option);\r\n        }\r\n    }\r\n})\r\n\r\nVue.component('modal', {\r\n    template: `<div :id=\"id\" class=\"modal fade\" :class=\"getModalClass()\" data-backdrop=\"true\">\r\n        <div class=\"modal-dialog\" :class=\"size\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\" :class=\"getModalColor()\">\r\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\r\n                    <h6 class=\"modal-title\">\r\n\r\n                        <span v-text=\"title\"></span>\r\n                    </h6>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <slot></slot>\r\n                </div>\r\n                <div v-if=\"showFooter\" class=\"modal-footer\">\r\n                    <button v-if=\"showFooterCloseButton\" type=\"button\" @click=\"close\" class=\"btn btn-link btn-link--inactive\" data-dismiss=\"modal\">Close</button>\r\n                    <button\r\n                        v-if=\"showFooterSubmitButton\"\r\n                        :id=\"id+'Button'\"\r\n                        :disabled=\"disableFooterSubmitButton\"\r\n                        :name=\"id+'Button'\"\r\n                        :title=\"submitButton.title\"\r\n                        type=\"submit\"\r\n                        @click=\"submit\"\r\n                        class=\"btn-ladda btn\"\r\n                        :class=\"getButtonClass()\" >\r\n                        {{submitButton.text}}\r\n                    </button>\r\n                </div>\r\n                <div v-else class=\"modal-footer\"></div>\r\n            </div>\r\n        </div>\r\n    </div>`,\r\n    props: {\r\n        id: {\r\n            default() {\r\n                return 'modal';\r\n            }\r\n        },\r\n        title: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        class: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        size: {\r\n            default() {\r\n                return 'modal-md';\r\n            }\r\n        },\r\n        buttonOptions: {\r\n            default() {\r\n                return {\r\n                    name: 'modalButton',\r\n                    id: 'modalButton',\r\n                    title: 'Save',\r\n                    class: 'bg-primary',\r\n                    text: 'Save',\r\n                }\r\n            }\r\n        },\r\n        showFooter: {\r\n            default() {\r\n                return true;\r\n            }\r\n        },\r\n        showFooterSubmitButton: {\r\n            default() {\r\n                return true;\r\n            }\r\n        },\r\n        disableFooterSubmitButton: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        showFooterCloseButton: {\r\n            default() {\r\n                return true;\r\n            }\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            submitButton: {\r\n                name: '',\r\n                id: '',\r\n                title: '',\r\n                class: '',\r\n                text: '',\r\n            },\r\n            formData: {\r\n                scope: ''\r\n            }\r\n        }\r\n    },\r\n    created: function () {\r\n    },\r\n    mounted: function () {\r\n        if (this.buttonOptions) {\r\n            this.submitButton = { ...this.submitButton, ...this.buttonOptions }\r\n        }\r\n        if (this.formOptions) {\r\n            this.formData = { ...this.formData, ...this.formOptions }\r\n        }\r\n        if (Ladda) {\r\n            Ladda.bind('.btn-ladda');\r\n        }\r\n    },\r\n    beforeDestroy: function () {\r\n    },\r\n    methods: {\r\n        getModalColor: function () {\r\n            let color = this.color ? this.color : 'bg-primary';\r\n            return color;\r\n        },\r\n        getButtonClass: function () {\r\n            let className = this.color ? this.color : 'bg-primary';\r\n            className = this.submitButton.class ? `${className} ${this.submitButton.class}` : `${className}`;\r\n            return className;\r\n        },\r\n        getModalClass: function () {\r\n            let className = this.class ? this.class : '';\r\n            // className = this.size ? `${className} ${this.size}` : `${className}`;\r\n            return className;\r\n        },\r\n        close: function () {\r\n            this.hide(() => {\r\n                this.$emit('close');\r\n            })\r\n        },\r\n        submit: function () {\r\n            this.$emit('submit');\r\n        },\r\n        show: function (callback = null) {\r\n            if (this.id) {\r\n                $(`#${this.id}`).modal({\r\n                    backdrop: 'static',\r\n                    keyboard: false\r\n                });\r\n            }\r\n            callback && callback();\r\n        },\r\n        hide: function (callback = null) {\r\n            if (this.id) {\r\n                $(`#${this.id}`).modal('hide');\r\n            }\r\n            callback && callback();\r\n        },\r\n    },\r\n    watch: {\r\n    },\r\n});\r\n\r\nVue.component('pagination', {\r\n    template: `<div style=\"\" >\r\n                <nav :id=\"id\" ref=\"pagination\" class=\"bootpag__pagination\"></nav>\r\n              </div>`,\r\n    props: {\r\n        id: {\r\n            default() {\r\n                return 'pagination';\r\n            }\r\n        },\r\n        page: {\r\n            default() {\r\n                return 1;\r\n            }\r\n        },\r\n        limit: {\r\n            default() {\r\n                return 6;\r\n            }\r\n        },\r\n        total: {\r\n            default() {\r\n                return 0;\r\n            }\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            bootpag_total: Math.ceil(this.total / this.limit),\r\n        }\r\n    },\r\n    created: function () {\r\n        if (this.total) {\r\n            this.bootpag_total = Math.ceil(this.total / this.limit);\r\n        }\r\n    },\r\n    mounted: function () {\r\n        this.initBootpag();\r\n    },\r\n    beforeDestroy: function () {\r\n        if (this.id) {\r\n            $(`#${this.id}`).empty();\r\n        }\r\n    },\r\n    methods: {\r\n        initBootpag() {\r\n            const vm = this;\r\n            if (this.id) {\r\n                $(`#${this.id}`).bootpag({\r\n                    total: vm.bootpag_total,\r\n                    page: vm.page,\r\n                    maxVisible: 5,\r\n                    leaps: true,\r\n                    firstLastUse: true,\r\n                    first: '←',\r\n                    last: '→',\r\n                    wrapClass: 'pagination',\r\n                    activeClass: 'active',\r\n                    disabledClass: 'disabled',\r\n                    nextClass: 'next',\r\n                    prevClass: 'prev',\r\n                    lastClass: 'last',\r\n                    firstClass: 'first'\r\n                }).off(\"page\").on(\"page\", function (event, num) {\r\n                    var skip = vm.limit * (num - 1);\r\n                    vm.$emit('input', skip);\r\n                });\r\n            }\r\n        },\r\n        setPaginationTotal(total, limit) {\r\n            if (total && limit) {\r\n                this.bootpag_total = Math.ceil(total / limit);\r\n                this.$nextTick(() => {\r\n                    this.initBootpag();\r\n                })\r\n            }\r\n        },\r\n    },\r\n    watch: {\r\n        total: function (val) {\r\n            this.setPaginationTotal(val, this.limit);\r\n        },\r\n    },\r\n});\r\n\r\n\r\nVue.component('uploadInput', {\r\n    template: `\r\n    <div class=\"row upload-document--wrapper upload-cdg\" :class=\"wrapperClass\">\r\n      <div class=\"col-md-12 col-lg-12 col-12\">\r\n        <div v-if=\"showList\" class=\"upload-document__files\" :class=\"'upload-document__files--'+listStyle\">\r\n          <ul v-if=\"listStyle == 'thumbnail'\" class=\"file-list\" :class=\"{'file-list--empty' : !files.length && !filesToInsert.length}\">\r\n              <li v-if=\"files.length > 0\" :title=\"file.name\" class=\"file-list__item\" v-for=\"(file, index) in files\">\r\n                  <button type=\"button\" @click=\"removeFile(file)\" class=\"item__remove btn-default btn btn-cdg has-icon btn-rounded\">\r\n                    <i class=\"fa fa-close alone\"></i>\r\n                  </button>\r\n                  <figure class=\"item__thumbnail\" v-if=\"isImage(file.type)\">\r\n                    <img class=\"thumbnail-image\" :src=\"file.src\">\r\n                  </figure>\r\n                  <span class=\"item__icon\" v-else>\r\n                    {{ formatExtension(file.name) }}\r\n                  </span>\r\n                  <span class=\"item__name\">{{ file.name  }}</span>\r\n                  <span class=\"item__size\">{{ file.size | formatBytes }}</span>\r\n              </li>\r\n              <li v-if=\"filesToInsert.length\" :title=\"file.name\" class=\"file-list__item\" v-for=\"(file, index) in filesToInsert\">\r\n                  <button type=\"button\" @click=\"removeInsertedFile(file)\" class=\"item__remove btn-default btn btn-cdg has-icon btn-rounded\">\r\n                    <i class=\"fa fa-close alone\"></i>\r\n                  </button>\r\n                  <figure class=\"item__thumbnail\" v-if=\"isImage(file.type)\">\r\n                    <img class=\"thumbnail-image\" :src=\"file.src\">\r\n                  </figure>\r\n                  <span class=\"item__icon\" v-else>\r\n                    {{ formatExtension(file.name) }}\r\n                  </span>\r\n                  <span class=\"item__name\">{{ file.name  }}</span>\r\n                  <span class=\"item__size\">{{ file.size | formatBytes }}</span>\r\n              </li>\r\n          </ul>\r\n          <ul v-else-if=\"files.length > 0 && listStyle == 'text'\" class=\"file-list\">\r\n              <li :title=\"file.name\" class=\"file-list__item\" v-for=\"(file, index) in files\">\r\n                <i class=\"item__icon fa fa-paperclip\" ></i>\r\n                <span class=\"item__name\">{{ file.name  }}</span>\r\n                <span class=\"item__size\">{{ file.size | formatBytes }}</span>\r\n                <button type=\"button\" @click=\"removeFile(file)\" class=\"item__remove btn btn-default btn-cdg has-icon btn-rounded\">\r\n                  <i class=\"fa fa-close alone\"></i>\r\n                </button>\r\n              </li>\r\n          </ul>\r\n        </div>\r\n        <div v-show=\"showInput\" class=\"upload-document__input upload-cdg__input\">\r\n            <label :class=\"formRequired? 'required' : ''\">{{ formLabel }}</label>\r\n            <div class=\"uploader\" :class=\"{'disabled' : fileLimit && (files.length + filesToInsert.length) >= fileLimit}\" >\r\n                <input type=\"file\"\r\n                    name=\"styled_file\"\r\n                    class=\"file-styled custom-file-input\"\r\n                    :v-validate=\"formRequired ? 'required' : ''\"\r\n                    data-vv-delay=\"-1\"\r\n                    multiple=\"multiple\"\r\n                    :data-vv-scope=\"scope\"\r\n                    :disabled=\"fileLimit && (files.length + filesToInsert.length) >= fileLimit\"\r\n                    :accept=\"acceptedFiles+''\"\r\n                    @change=\"uploadFieldChange\">\r\n                <span class=\"filename\" style=\"user-select: none;\">\r\n                    {{ files.length? files[files.length - 1] ? files[files.length - 1].name  : '' : 'No file selected'}}\r\n                </span>\r\n                <span class=\"action btn bg-cdg bg-primary\" style=\"user-select: none;\">\r\n                    Choose File\r\n                </span>\r\n            </div>\r\n            <span class=\"input__help\">\r\n              <span class=\"input-help__list\">\r\n                <span v-if=\"fileLimit\" >*Maximum {{ actualLimit? actualLimit: fileLimit }} files per upload </span>\r\n                <span v-else>*No maximum file count per upload </span>\r\n                <span v-if=\"fileLimit && sizeLimit\">and </span>\r\n                <span v-if=\"sizeLimit\">each file size should be less than {{sizeLimit | formatBytes }}</span>\r\n                <span v-else>no maximum file size</span>\r\n              </span>\r\n              <span class=\"input__help accepted--wrapper\" v-if=\"acceptedFiles.length\">\r\n                *Only allow <ul class=\"accepted__list\"><li v-if=\"getAcceptedFileExtension(accepted)\" class=\"accepted-list__item\" v-for=\"(accepted, idx) in acceptedFiles\" >{{ getAcceptedFileExtension(accepted)}}</li></ul>\r\n              </span>\r\n            </span>\r\n            <i v-show=\"errors.has(scope+'.document')\" class=\"fa fa-warning help is-danger\"></i>\r\n            <span class=\"help is-danger\" v-if=\"errors.has(scope+'.document') && !files.length\">\r\n              *This field is required.\r\n            </span>\r\n        </div>\r\n        <div v-if=\"insertFiles\">\r\n          <slot></slot>\r\n        </div>\r\n      </div>\r\n    </div>`,\r\n    props: {\r\n        sizeLimit: {\r\n            default() {\r\n                return null;\r\n            }\r\n        },\r\n        fileLimit: {\r\n            default() {\r\n                return null;\r\n            }\r\n        },\r\n        actualLimit: {\r\n            default() {\r\n                return 0;\r\n            }\r\n        },\r\n        scope: {\r\n            default() {\r\n                return 'uploadDocument'\r\n            }\r\n        },\r\n        showInput: {\r\n            default() {\r\n                return true;\r\n            }\r\n        },\r\n        showList: {\r\n            default() {\r\n                return true;\r\n            }\r\n        },\r\n        listStyle: {\r\n            default() {\r\n                return 'thumbnail';\r\n            }\r\n        },\r\n        formLabel: {\r\n            default() {\r\n                return 'Files';\r\n            }\r\n        },\r\n        formRequired: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        acceptedFiles: {\r\n            default() {\r\n                return [];\r\n            }\r\n        },\r\n        wrapperClass: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        compressFile: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        insertFiles: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        filesToInsert: {\r\n            default() {\r\n                return [];\r\n            }\r\n        },\r\n        zipName: {\r\n            default() {\r\n                return moment().format('x') + '.zip';\r\n            }\r\n        },\r\n        index: {\r\n            default() {\r\n                return 0;\r\n            }\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            data: [],\r\n            files: [],\r\n        }\r\n    },\r\n    created() { },\r\n    mounted() {\r\n    },\r\n    destroyed() { },\r\n    methods: {\r\n        reset() {\r\n            this.files = [];\r\n            if (document.getElementById(\"files\")) {\r\n                document.getElementById(\"files\").value = [];\r\n            }\r\n\r\n            if (this.errors) {\r\n                this.errors.clear();\r\n            }\r\n        },\r\n        async prepareFiles() {\r\n            const base = this;\r\n            // let files = this.files.map((file, index)=> {\r\n            //     return {\r\n            //         name: file.name,\r\n            //         size: file.size,\r\n            //         file: file.file\r\n            //     }\r\n            // });\r\n\r\n            // this.$emit('get-files', files, this.index);\r\n\r\n            try {\r\n                let base64Files = await base.getFiles(this.files, 'thumbnail')\r\n                                .then(file => { return file; });\r\n                let files = this.files.map((file, index) => {\r\n                    return {\r\n                        name: file.name,\r\n                        size: file.size,\r\n                        file: base64Files[index]\r\n                    }\r\n                });\r\n                if (this.compressFile) {\r\n                    const zip = new JSZip();\r\n                    let zipSize = 0;\r\n                    files.forEach((file, key) => {\r\n                        let type = base.files[key] ? base.files[key].type : '';\r\n                        zip.file(file.name, file.file, { base64: true });\r\n                        zipSize = zipSize + file.size;\r\n                    });\r\n                    zip.generateAsync({ type: 'base64', mimeType: \"application/zip\", compression: \"DEFLATE\" }).then((result) => {\r\n                        let zipped = result;\r\n                        files = [{\r\n                            name: base.zipName,\r\n                            size: zipped.size ? zipped.size : zipSize,\r\n                            file: zipped\r\n                        }];\r\n                        this.$emit('get-files', files, this.index);\r\n                    });\r\n                }\r\n                else {\r\n                    this.$emit('get-files', files, this.index);\r\n                }\r\n            }\r\n            catch(e) {\r\n                console.log(e); \r\n                Alert.warning('Failed to process file. Please upload file in smaller size'); \r\n            }\r\n        },\r\n        isImage(fileType) {\r\n            let res = false;\r\n            let type = fileType || '';\r\n            if (type.startsWith('image/')) {\r\n                res = true;\r\n            }\r\n            return res;\r\n        },\r\n        getAcceptedFileExtension(fileType) {\r\n            let result = '';\r\n            result = fileType ? fileType.split('/')[1] : result;\r\n            return result;\r\n        },\r\n        formatName(name) {\r\n            let string = name.replace(/[^A-Za-z 0-9 \\.,\\?\"\"!@#\\$%\\^&\\*\\(\\)-_=\\+;:<>\\/\\\\\\|\\}\\{\\[\\]`~]*/g, '');\r\n            return string;\r\n        },\r\n        formatExtension(filename) {\r\n            var ext = /^.+\\.([^.]+)$/.exec(filename);\r\n            return ext == null ? \"\" : ext[1];\r\n        },\r\n        getFiles(files, resultType) {\r\n            return Promise.all(files.map(file => this.getFile(file, resultType)));\r\n        },\r\n        getFile(file, resultType = \"file\") {\r\n            var reader = new FileReader();\r\n            if (resultType == 'file') {\r\n                return new Promise((resolve, reject) => {\r\n                    reader.onerror = () => { reader.abort(); reject(new Error(\"Error parsing file\")); }\r\n                    reader.onload = function () {\r\n                        //alt 1\r\n                        let result = btoa(new Uint8Array(this.result).reduce(\r\n                            function (data, byte) {\r\n                                return data + String.fromCharCode(byte);\r\n                            },\r\n                            ''\r\n                        ));\r\n\r\n                        //alt 3\r\n                        // let result = btoa(new Uint8Array(this.result)\r\n                        //             .reduce((data,byte)=>(\r\n                        //                 data.push(String.fromCharCode(byte)),data) ,[])\r\n                        //                 .join('')\r\n                        //             );\r\n\r\n                        //alt 2 (ori)\r\n                        // let bytes = Array.from(new Uint8Array(this.result));\r\n                        // let result = btoa(bytes.map((item) => String.fromCharCode(item)).join(\"\"));\r\n                        resolve(result);\r\n                    }\r\n\r\n\r\n\r\n                    reader.readAsArrayBuffer(file);\r\n                });\r\n            }\r\n            else if (resultType == 'thumbnail') {\r\n                return new Promise((resolve, reject) => {\r\n                    reader.onerror = () => { reader.abort(); reject(new Error(\"Error parsing file\")); }\r\n                    reader.onload = function (event) {\r\n                        let src = event.target.result;\r\n                        resolve(src);\r\n                    }\r\n                    reader.readAsDataURL(file);\r\n                });\r\n            }\r\n        },\r\n        getFileSize() {\r\n            this.uploadSize = 0; // Reset to beginning\r\n            this.$nextTick(() => {\r\n                this.files.map((item) => { this.uploadSize += parseInt(item.size); });\r\n                this.uploadSize = Number((this.uploadSize).toFixed(1));\r\n                this.$forceUpdate();\r\n            })\r\n        },\r\n        removeFile(file) {\r\n            this.files.splice(this.files.indexOf(file), 1);\r\n            this.getFileSize();\r\n        },\r\n        removeInsertedFile(file) {\r\n            this.$emit('remove-inserted-file', file);\r\n        },\r\n        async uploadFieldChange(e) {\r\n            const base = this;\r\n            var files = e.target.files || e.dataTransfer.files;\r\n            let previous = this.files;\r\n            let upload = [];\r\n            let overCapacity = false;\r\n            let accepted = this.acceptedFiles.length ? false : true;\r\n            let duplicate = false;\r\n\r\n            if (!files.length) {\r\n                Alert.error('Please choose at least one file to upload');\r\n            }\r\n            else {\r\n                for (var i = files.length - 1; i >= 0; i--) {\r\n                    upload.push(files[i]);\r\n                }\r\n                upload = upload.filter((item) => {\r\n                    accepted = accepted ? accepted : accepted || this.acceptedFiles.includes(item.type);\r\n                    if (!_.intersectionBy(this.files, item, 'name').length) {\r\n                        if (this.sizeLimit && item.size <= this.sizeLimit) {\r\n                            if (accepted) {\r\n                                return item;\r\n                            }\r\n                            else {\r\n                                accepted = false;\r\n                            }\r\n                        }\r\n                        else {\r\n                            overCapacity = true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        duplicate = true;\r\n                    }\r\n                });\r\n\r\n                //give thumbnails\r\n                let thumbnails = await this.getFiles(upload, 'thumbnail');\r\n                // let converted = await this.getFiles(upload, 'file');\r\n                thumbnails.forEach((thumbnail, index) => {\r\n                    if (upload[index]) {\r\n                        upload[index]['src'] = thumbnail;\r\n                        // upload[index]['file'] = converted[index]; \r\n                    }\r\n                });\r\n\r\n                //notify on over limit\r\n                if (overCapacity) {\r\n                    Alert.error(`The maximum size for each file is ${this.formatBytes(this.sizeLimit)}`);\r\n                }\r\n                //notify on duplicate\r\n                if (duplicate) {\r\n                    Alert.error('This file has been selected before');\r\n                }\r\n\r\n                //notify on unaccepted\r\n                if (!accepted) {\r\n                    Alert.error('This file type is not supported');\r\n                }\r\n\r\n                //upload file\r\n                if (this.fileLimit && _.concat(this.files, upload).length > this.fileLimit) {\r\n                    upload = upload.slice(0, this.fileLimit - this.files.length);\r\n                    if (!this.files.length) {\r\n                        this.files = _.concat(this.files, upload); //only concat on empty files\r\n                    }\r\n                    Alert.error(`Sorry, you may only upload up to ${this.fileLimit} files at one time`);\r\n                }\r\n                else {\r\n                    this.files = _.concat(this.files, upload);\r\n                }\r\n\r\n            }\r\n\r\n            if (document.getElementById(\"files\")) {\r\n                document.getElementById(\"files\").value = [];\r\n            }\r\n        },\r\n        formatBytes: function (bytes, decimals) {\r\n            if (!bytes) return '0 Bytes';\r\n            var k = 1000,\r\n                dm = decimals <= 0 ? 0 : decimals || 2,\r\n                sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],\r\n                i = Math.floor(Math.log(bytes) / Math.log(k));\r\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\r\n        }\r\n\r\n    },\r\n    filters: {\r\n        formatBytes: function (bytes, decimals) {\r\n            if (!bytes) return '0 Bytes';\r\n            var k = 1000,\r\n                dm = decimals <= 0 ? 0 : decimals || 2,\r\n                sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],\r\n                i = Math.floor(Math.log(bytes) / Math.log(k));\r\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\r\n        }\r\n    },\r\n    watch: {\r\n    }\r\n});\r\n\r\nVue.component('tabbable', {\r\n    template: `\r\n        <div class=\"tabbable\">\r\n            <ul class=\"nav nav-tabs\" :class=\"tabListClass+' '+navStyle\" >\r\n                <li v-for=\"(tab, idx) in tabs\" :name=\"'tab_'+(tab.name || tab.id)\" :class=\"{'active' : activeTab.id == tab.id}\" @click=\"toggleTab(tab)\">\r\n                    <a :href=\"'#bottom-justified-tab'+idx\" data-toggle=\"tab\" aria-expanded=\"false\">\r\n                    {{ tab.label || tab.text || '' }}\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n\r\n            <div class=\"tab-content\" v-if=\"showMethod == 'v-if'\">\r\n                <div class=\"tab-pane\"\r\n                    :name=\"'tabPane_'+(tab.name || tab.id)\"\r\n                    v-if=\"activeTab.id == tab.id\"\r\n                    :class=\"{'active' : activeTab.id == tab.id}\"\r\n                    :id=\"'bottom-justified-tab'+idx\"\r\n                    v-for=\"(tab, idx) in tabs\" >\r\n\r\n                    <slot :name=\"'tab'+idx\" :slot=\"'tab'+idx\">\r\n                    </slot>\r\n\r\n                </div>\r\n            </div>\r\n            <div class=\"tab-content\" v-if=\"showMethod == 'v-show'\">\r\n                <div class=\"tab-pane\"\r\n                    :name=\"'tabPane_'+(tab.name || tab.id)\"\r\n                    v-show=\"activeTab.id == tab.id\"\r\n                    :class=\"{'active' : activeTab.id == tab.id}\"\r\n                    :id=\"'bottom-justified-tab'+idx\"\r\n                    v-for=\"(tab, idx) in tabs\" >\r\n\r\n                    <slot :name=\"'tab'+idx\" :slot=\"'tab'+idx\">\r\n                    </slot>\r\n\r\n                </div>\r\n            </div>\r\n        <div>\r\n    `,\r\n    props: {\r\n        tabListClass: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        tabs: {\r\n            /*\r\n                [{\r\n                    id: '',\r\n                    name: '',\r\n                    label: ''\r\n                }]\r\n            */\r\n            default() {\r\n                return [];\r\n            }\r\n        },\r\n        beforeChange: {\r\n            default() {\r\n                return null;\r\n            }\r\n        },\r\n        showMethod: {\r\n            default() {\r\n                return 'v-if'; \r\n            }\r\n        },\r\n        navStyle: {\r\n            default() {\r\n                return ' nav-tabs-bottom'; \r\n            }\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            activeTab: this.tabs.length ? this.tabs[0] : {\r\n                id: '',\r\n                name: '',\r\n                label: ''\r\n            },\r\n        }\r\n    },\r\n    mounted() {\r\n\r\n    },\r\n    methods: {\r\n        toggleTab(tab) {\r\n            if (this.beforeChange) {\r\n                this.$emit('before-tabbable', this.beforeChange);\r\n\r\n                Vue.nextTick(() => {\r\n                    this.activeTab = { ...this.activeTab, ...(tab || {}) };\r\n                    this.$emit('change', tab);\r\n                })\r\n            }\r\n            else {\r\n                this.activeTab = { ...this.activeTab, ...(tab || {}) };\r\n                this.$emit('change', tab);\r\n            }\r\n        }\r\n    }\r\n})\r\n\r\nVue.component('radioInput', {\r\n    template: `<label :for=\"id\" :class=\"labelClass\" :disabled=\"disabled\" >\r\n                    <img v-if=\"image\" class=\"image\" :src=\"image\"/>\r\n                    <span v-if=\"textPosition == 'left'\" class=\"text position-left\" :class=\"textClass\" v-text=\"label\"></span>\r\n\r\n                    <div class=\"choice\">\r\n                        <span v-show=\"showRadio\" class=\"\" :class=\"checked ? 'checked' : ''\">\r\n                            <input :disabled=\"disabled\" :name=\"name\" :data-vv-name=\"name\"\r\n                                :data-vv-scope=\"scope\" type=\"radio\" class=\"styled\"\r\n                                :id=\"id\" :checked=\"checked\"/>\r\n                        </span>\r\n                    </div>\r\n\r\n                    <span v-if=\"textPosition == 'right'\" class=\"text position-right\" :class=\"textClass\" v-text=\"label\"></span> \r\n\r\n\r\n                </label>`,\r\n    props: {\r\n        active: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        id: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        label: {\r\n            default() {\r\n                return 'Radio button';\r\n            }\r\n        },\r\n        image: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        disabled: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        name: {\r\n            default() {\r\n                return 'radioButton'\r\n            }\r\n        },\r\n        scope: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        showRadio: {\r\n            default() {\r\n                return true;\r\n            }\r\n        },\r\n        value: {\r\n            default() {\r\n                return false; \r\n            }\r\n        },\r\n        position: {\r\n            default() {\r\n                //left, right, default\r\n                return 'default';\r\n            }\r\n        },\r\n        textPosition: {\r\n            default() {\r\n                return 'right'\r\n            }\r\n        },\r\n        boldText: {\r\n            default() {\r\n                return false; \r\n            }\r\n        },\r\n        inline: {\r\n            default() {\r\n                return false; \r\n            }\r\n        }\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            checked: false,\r\n        }\r\n    },\r\n    mounted() {\r\n        this.checked = this.id == this.value ? true : false; \r\n    },\r\n    computed: {\r\n        labelClass() {\r\n            let className = this.inline ? 'radio-inline' : 'radio'; \r\n            let positionName = this.position == 'default' ? className : className+'-'+this.position; \r\n\r\n            return positionName;\r\n        },\r\n        textClass() {\r\n            //to do later\r\n            let textClass = this.position == 'default' ? 'ml-30' : ''; \r\n            textClass = this.boldText ? `text-bold ${textClass}` : textClass; \r\n            return textClass; \r\n        }\r\n    },\r\n    methods: {\r\n        toggleInput() {\r\n            this.checked = this.id == this.value ? true : false; \r\n        }\r\n    },\r\n    watch: {\r\n        value(val) {\r\n            this.checked = this.id == this.value ? true : false; \r\n        }\r\n    },\r\n});\r\n\r\nVue.component('lightboxGallery', {\r\n    template: `<div :id=\"wrapperId\" class=\"row lightbox-gallery\" :class=\"wrapperClass\">\r\n                    <div v-for=\"(image, index) in images\" class=\"lightbox-gallery__item\" :class=\"getGalleryColumns()\">\r\n                        <div class=\"thumbnail\">\r\n                            <div class=\"thumb\">\r\n                                <img :src=\"image.source\" alt=\"\">\r\n                                <div class=\"caption-overflow\">\r\n                                    <span class=\"link-wrapper\">\r\n                                        <a  @click=\"openFancybox(image)\" :href=\"image.source\"\r\n                                            class=\"gallery__item link\" data-popup=\"lightbox\" :rel=\"rel\"\r\n                                            >\r\n                                            <span class=\"btn border-white text-white btn-flat btn-icon btn-rounded\">\r\n                                                <i class=\"glyphicon glyphicon-zoom-in\"></i>\r\n                                            </span>\r\n                                        </a>\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"label\" v-if=\"image.label\">\r\n                                <span class=\"label__text\">{{ image.label }}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>`,\r\n    props: {\r\n        images: {\r\n            default() {\r\n                return [];\r\n            }\r\n        },\r\n        wrapperId: {\r\n            default() {\r\n                return 'gallery'; \r\n            }\r\n        },\r\n        wrapperClass: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        listClass: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        rel: {\r\n            default() {\r\n                return 'gallery';\r\n            }\r\n        },\r\n        colSize: {\r\n            default() {\r\n                return '';\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        getGalleryColumns() {\r\n            const maxColSize = 12;\r\n            if (this.colSize) {\r\n                let colSize = `col-sm-${this.colSize}`;\r\n                return (this.listClass || '') + ' ' + colSize;\r\n            }\r\n            else {\r\n                let colSize = (this.images || []).length % 2 == 0 ?\r\n                    ((this.images || []).length >= 4 ? `col-sm-${maxColSize / 4}` : `col-sm-${maxColSize / 2}`)\r\n                    : ((this.images || []).length >= 3 ? `col-sm-${maxColSize / 3}` : `col-sm-${maxColSize / 1}`);\r\n                return (this.listClass || '') + ' ' + colSize;\r\n            }\r\n        },\r\n        openFancybox(image) {\r\n            $(\".gallery__item\").fancybox({\r\n                'transitionIn': 'elastic',\r\n                'transitionOut': 'elastic',\r\n                'speedIn': 600,\r\n                'speedOut': 200,\r\n                'overlayShow': true\r\n            });\r\n\r\n        }\r\n    }\r\n});\r\n\r\n\r\nVue.component('slickSlider', {\r\n    template: `\r\n        <div class=\"slick slick-wrapper\" :class=\"wrapperClass\">\r\n            <div class=\"slick__active\" v-if=\"showActiveSlide\">\r\n                <div v-if=\"!fancyActiveSlide && activeSlide.image\">\r\n                    <figure class=\"active__image figure\" v-if=\"activeSlide.image\" >\r\n                        <img :src=\"activeSlide.image\">\r\n                    </figure>\r\n                </div>\r\n                <a v-else-if=\"fancyActiveSlide && activeSlide.image\" :href=\"activeSlide.image\"\r\n                    @click=\"openFancybox(activeSlide)\" class=\"active__image fancybox\" :rel=\"rel\" data-popup=\"lightbox\">\r\n                    <img :src=\"activeSlide.image\" >\r\n                    <span class=\"zoom-image overlay\">\r\n                        <i class=\"overlay__icon\" class=\"glyphicon glyphicon-zoom-in\"></i>\r\n                        <small v-if=\"activeSlide.title\" class=\"overlay__text\">{{ activeSlide.title}}</small>\r\n                    </span>\r\n                </a>\r\n                <span class=\"active__label\" v-if=\"activeSlide.label\" >{{activeSlide.label }}</span>\r\n                <strong class=\"active__title\" v-if=\"activeSlide.title\" v-text=\"activeSlide.title\" ></strong>\r\n                <p v-if=\"activeSlide.description\" class=\"active__description\">{{ activeSlide.description }}</p>\r\n            </div>\r\n            <div :id=\"'slickSlider_'+slickId\" class=\"slick__slides\" >\r\n                <div v-for=\"(slide, idx) in slides\" class=\"slick__slide\" :slick-nav=\"idx\" :data-index=\"idx\"  >\r\n                    <div class=\"slide__image\" v-if=\"slide.image && !fancyActiveSlide\">\r\n                        <img v-if=\"lazyLoad\" :data-lazy=\"slide.image\">\r\n                        <img v-else :src=\"slide.image\">\r\n                    </div>\r\n                    <a v-else-if=\"fancyActiveSlide && slide.image\" class=\"active__image fancybox\"\r\n                        :rel=\"rel\" :href=\"slide.image\" data-popup=\"lightbox\">\r\n                        <img :src=\"slide.image\" >\r\n                        <span class=\"zoom-image overlay\">\r\n                            <i class=\"overlay__icon\" class=\"glyphicon glyphicon-zoom-in\"></i>\r\n                            <small v-if=\"slide.title\" class=\"overlay__text\">{{ slide.title}}</small>\r\n                        </span>\r\n                    </a>\r\n\r\n                    <span class=\"slide__label\" v-if=\"slide.label\">{{ slide.label }} </span>\r\n                    <strong class=\"slide__title\" v-if=\"slide.title\">{{ slide.title }}</strong>\r\n                    <p v-if=\"slide.description\" class=\"slide__description\">{{ slide.description }}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"text-muted\" v-if=\"showActiveDescription\">\r\n                <small>Showing  <span>{{ activeIndex+1}} of {{ (slides || []).length }} {{ (slides || []).length ? (slideLabel || 'slide')+'s' : (slideLabel || 'slide')}} </span></small>\r\n            </div>\r\n        </div>\r\n    `,\r\n    props: {\r\n        slideLabel: {\r\n            default() {\r\n                return 'slide';\r\n            }\r\n        },\r\n        rel: {\r\n            //use this with fancyActiveSlide\r\n            default() {\r\n                return 'gallery'\r\n            }\r\n        },\r\n        slickId: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        wrapperClass: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        slides: {\r\n            default() {\r\n                return [];\r\n            }\r\n        },\r\n        lazyLoad: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        showActiveSlide: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        showActiveDescription: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        fancyActiveSlide: {\r\n            default() {\r\n                return true;\r\n            }\r\n        },\r\n        responsive: {\r\n            default() {\r\n                return true;\r\n            }\r\n        },\r\n        autoplay: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        autoplaySpeed: {\r\n            default() {\r\n                return 1000;\r\n            }\r\n        },\r\n        accessibility: {\r\n            //Enables tabbing and arrow key navigation\r\n            default() {\r\n                return true;\r\n            }\r\n        },\r\n        arrows: {\r\n            //Prev/Next Arrows\r\n            default() {\r\n                return true;\r\n            }\r\n        },\r\n        dots: {\r\n            default() {\r\n                return true;\r\n            }\r\n        },\r\n        infinite: {\r\n            default() {\r\n                return true;\r\n            }\r\n        },\r\n        variableWidth: {\r\n            //adaptive width\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        adaptiveHeight: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        fade: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        centerMode: {\r\n            default() {\r\n                return true;\r\n            }\r\n        },\r\n        slidesToShow: {\r\n            default() {\r\n                return 0;\r\n            }\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            activeIndex: 0,\r\n            activeSlide: {\r\n                image: this.slides.length ? (this.slides[0].image || '') : '',\r\n                label: this.slides.length ? (this.slides[0].label || '') : '',\r\n                description: this.slides.length ? (this.slides[0].description || '') : '',\r\n                title: this.slides.length ? (this.slides[0].title || '') : '',\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n        this.destroy(() => {\r\n            this.init();\r\n\r\n            Vue.nextTick(() => {\r\n                this.mountSlickFunctions();\r\n            })\r\n        });\r\n\r\n        window.addEventListener('resize', this.setSliderTrackWidth);\r\n    },\r\n    beforeDestroy() {\r\n        window.removeEventListener('resize', this.setSliderTrackWidth);\r\n    },\r\n    computed: {\r\n        options() {\r\n            var slidesToShow = this.slidesToShow ? this.slidesToShow\r\n                : ((this.slides || []).length % 2 == 0 ?\r\n                    (this.slides || []).length >= 4 ? 4 : 2\r\n                    : (this.slides || []).length >= 3 ? 3 : 1);\r\n            var lazyLoad = this.lazyLoad ? 'ondemand' : undefined;\r\n            var responsive = this.responsive ? [\r\n                {\r\n                    breakpoint: 768,\r\n                    settings: {\r\n                        arrows: false,\r\n                        centerMode: this.centerMode,\r\n                        centerPadding: '40px',\r\n                        slidesToShow: slidesToShow\r\n                    }\r\n                },\r\n                {\r\n                    breakpoint: 480,\r\n                    settings: {\r\n                        arrows: false,\r\n                        centerMode: this.centerMode,\r\n                        centerPadding: '40px',\r\n                        slidesToShow: 2\r\n                    }\r\n                }\r\n            ] : undefined;\r\n            return {\r\n                variableWidth: this.variableWidth,\r\n                adaptiveHeight: this.adaptiveHeight,\r\n                slidesToShow: slidesToShow,\r\n                accessibility: this.accessibility,\r\n                slidesToScroll: 1,\r\n                dots: this.dots,\r\n                arrows: this.arrows,\r\n                infinite: this.infinite,\r\n                fade: this.fade,\r\n                centerMode: this.centerMode,\r\n                lazyLoad: lazyLoad,\r\n                autoplay: this.autoplay,\r\n                autoplaySpeed: this.autoplaySpeed,\r\n                responsive: responsive\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        goToSlide(index) {\r\n            if ($(`#slickSlider_${this.slickId}`)[0] && this.slides[parseInt(index)]) {\r\n                $(`#slickSlider_${this.slickId}`).slick('slickGoTo', parseInt(index), false);\r\n            }\r\n        },\r\n        init(callback) {\r\n            this.slickSlider = $(`#slickSlider_${this.slickId}`).slick(this.options);\r\n\r\n            callback && callback();\r\n        },\r\n        refresh(callback) {\r\n            if ($(`#slickSlider_${this.slickId}`)[0]) {\r\n                $(`#slickSlider_${this.slickId}`).slick('setPosition');\r\n            }\r\n        },\r\n        destroy(callback) {\r\n            if ($(`#slickSlider_${this.slickId}`)[0] &&\r\n                $(`#slickSlider_${this.slickId}`).hasClass('.slick-initialized')) {\r\n                $(`#slickSlider_${this.slickId}`).slick('unslick');\r\n            }\r\n\r\n            callback && callback();\r\n        },\r\n        openFancybox() {\r\n\r\n        },\r\n        setSliderTrackWidth() {\r\n            if ($(`#slickSlider_${this.slickId}`)[0]) {\r\n                if ($(`#slickSlider_${this.slickId} .slick-track`)[0]) {\r\n                    var sliderWidth = $(`#slickSlider_${this.slickId} .slick-track`).css('width');\r\n                    sliderWidth = parseInt(((sliderWidth || 0).match(/\\d+/)[0])) + 300; //static //to check later\r\n\r\n                    $(`#slickSlider_${this.slickId} .slick-track`).css('width', `${sliderWidth}px`);\r\n                }\r\n            }\r\n        },\r\n        mountSlickFunctions() {\r\n            const base = this;\r\n\r\n            //click on image\r\n            $(`#slickSlider_${this.slickId} .slick__slide`).on('click', function () {\r\n                const slide = $(this);\r\n                let index = slide.attr('slick-nav');\r\n\r\n                if (base.slides[index]) {\r\n                    $(`#slickSlider_${base.slickId}`).slick('slickGoTo', index, false);\r\n                }\r\n            });\r\n\r\n            $(`#slickSlider_${this.slickId}`).on('beforeChange',\r\n                (event, slick, currentSlide, nextSlide) => {\r\n                    var currentSlideIndex = $(`#slickSlider_${this.slickId}`).slick('slickCurrentSlide');\r\n                    // this.activeIndex = currentSlideIndex;\r\n\r\n                    this.$emit('before-change', 'beforeChange',\r\n                        { current: currentSlide, to: nextSlide }, currentSlideIndex);\r\n                });\r\n\r\n            $(`#slickSlider_${this.slickId}`).on('afterChange',\r\n                (event, slick, currentSlide, nextSlide) => {\r\n                    var currentSlideIndex = $(`#slickSlider_${this.slickId}`).slick('slickCurrentSlide');\r\n                    this.activeIndex = currentSlideIndex;\r\n\r\n                    this.$emit('after-change', 'afterChange',\r\n                        { current: currentSlide, to: nextSlide }, currentSlideIndex);\r\n                });\r\n\r\n            $('body').on('click', `#slickSlider_${this.slickId} .slick-prev`, () => {\r\n                var currentSlideIndex = $(`#slickSlider_${this.slickId}`).slick('slickCurrentSlide'),\r\n                    currentSlide = $(`#slickSlider_${this.slickId}`).slick('getSlick');\r\n\r\n                this.$emit('prev', 'prev', {}, currentSlideIndex);\r\n            });\r\n\r\n            $('body').on('click', `#slickSlider_${this.slickId} .slick-next`, () => {\r\n                var currentSlideIndex = $(`#slickSlider_${this.slickId}`).slick('slickCurrentSlide'),\r\n                    currentSlide = $(`#slickSlider_${this.slickId}`).slick('getSlick');\r\n\r\n                this.$emit('next', 'next', {}, currentSlideIndex);\r\n            });\r\n\r\n            $('body').on('click', `#slickSlider_${this.slickId} .slick-dots li`, () => {\r\n                var currentSlide = $(`#slickSlider_${this.slickId}`).slick('slickCurrentSlide');\r\n\r\n                var currentSlideIndex = $(`#slickSlider_${this.slickId}`).slick('slickCurrentSlide'),\r\n                    currentSlide = $(`#slickSlider_${this.slickId}`).slick('getSlick');\r\n\r\n                this.$emit('nav-click', 'navClick', {}, currentSlideIndex);\r\n            });\r\n\r\n            $(`#slickSlider_${this.slickId}`).on('edge', (event, slick, direction) => {\r\n\r\n            });\r\n\r\n\r\n            this.setSliderTrackWidth();\r\n        },\r\n    },\r\n    watch: {\r\n        activeIndex(val) {\r\n            if (this.slides[val]) {\r\n                this.activeSlide = {...this.activeSlide, ...{\r\n                        image: this.slides[val].image || '',\r\n                        label: this.slides[val].label || '',\r\n                        description: this.slides[val].description || '',\r\n                        title: this.slides[val].title || '',\r\n                    }\r\n                };\r\n            }\r\n            Vue.nextTick(() => {\r\n                this.setSliderTrackWidth();\r\n            })\r\n        }\r\n    }\r\n})\r\n\r\nVue.component('lightboxThumbnail', {\r\n    template: `<div class=\"lightbox-thumbnail\" :id=\"imageId\" :class=\"current.wrapperClass\">\r\n                    <div class=\"thumbnail\"  >\r\n                        <div class=\"thumb\">\r\n                            <a :href=\"current.imageSource\" @click=\"openFancybox(current)\" :class=\"'lightbox-link'\" :rel=\"rel\" data-popup=\"lightbox\">\r\n                                <img :src=\"current.imageSource\" :alt=\"currentIndex\">\r\n                                <span class=\"zoom-image overlay\">\r\n                                    <i v-if=\"current.overlayIcon\" class=\"overlay__icon\" :class=\"current.overlayIcon\"></i>\r\n                                    <small v-if=\"current.overlayText\" class=\"overlay__text\">{{ current.overlayText}}</small>\r\n                                </span>\r\n                            </a>\r\n                        </div>\r\n                        <div class=\"label\" v-if=\"current.labelText\">\r\n                            <span class=\"label__text\">{{ current.labelText }}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>`,\r\n    props: {\r\n        imageId: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        rel: {\r\n            default() {\r\n                return 'gallery';\r\n            }\r\n        },\r\n        imageActive: {\r\n            default() {\r\n                return {};\r\n            }\r\n        },\r\n        imageSource: {\r\n            default() {\r\n                return 'https://via.placeholder.com/300/150'\r\n            }\r\n        },\r\n        overlayIcon: {\r\n            default() {\r\n                return `glyphicon glyphicon-zoom-in`\r\n            }\r\n        },\r\n        overlayText: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        labelText: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        wrapperClass: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        parentClass: {\r\n            default() {\r\n                return ''\r\n            }\r\n        },\r\n        currentIndex: {\r\n            default() {\r\n                return ''\r\n            }\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            current: {\r\n                index: this.currentIndex,\r\n                imageSource: this.imageSource,\r\n                overlayIcon: this.overlayIcon,\r\n                overlayText: this.overlayText,\r\n                labelText: this.labelText,\r\n                wrapperClass: this.wrapperClass,\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n\r\n    },\r\n    computed: {\r\n\r\n    },\r\n    methods: {\r\n        openFancybox(image) {\r\n            if (this.parentClass) {\r\n                //only use parentClass if the contents are direct children of the same parent\r\n                $(\".\" + this.parentClass).fancybox({\r\n                    'transitionIn': 'elastic',\r\n                    'transitionOut': 'elastic',\r\n                    'speedIn': 600,\r\n                    'speedOut': 200,\r\n                    'overlayShow': true\r\n                });\r\n            }\r\n            else {\r\n                $(\".lightbox-link\").fancybox({\r\n                    'transitionIn': 'elastic',\r\n                    'transitionOut': 'elastic',\r\n                    'speedIn': 600,\r\n                    'speedOut': 200,\r\n                    'overlayShow': true\r\n                });\r\n\r\n            }\r\n\r\n        }\r\n    },\r\n    watch: {\r\n    },\r\n    beforeDestroy() {\r\n\r\n    },\r\n});\r\n\r\nVue.component('toggleInput', {\r\n    template: `<div v-if=\"inputStyle == 'basic'\" class=\"checkbox checkbox-switch checkbox-cdg\">\r\n                <label style=\"padding: 0; \">\r\n                    <div class=\"bootstrap-switch bootstrap-switch-wrapper bootstrap-switch-animate bootstrap-switch-focused\"\r\n                        :class=\"getWrapperClass()\" :style=\"getWrapperStyle()\">\r\n                            <div class=\"bootstrap-switch-container\" :style=\"getSwitchContainerStyle()\">\r\n                                 <span class=\"bootstrap-switch-handle-on bootstrap-switch-primary\"\r\n                                       :style=\"getSwitchInputStyle(true, 'on')\">{{ onLabel }}</span>\r\n                                 <span class=\"bootstrap-switch-label\"\r\n                                    :style=\"getSwitchInputStyle(false, 'space')\">&nbsp;</span>\r\n                                 <span class=\"bootstrap-switch-handle-off bootstrap-switch-default\"\r\n                                 :style=\"getSwitchInputStyle(false, 'off')\">{{ offLabel }}</span>\r\n                                <input type=\"checkbox\"\r\n                                    class=\"switch\"\r\n                                    :name=\"name\"\r\n                                    :disabled=\"disabled\"\r\n                                    :data-on-text=\"onLabel\"\r\n                                    :v-validate=\"validationRule || vValidate\"\r\n                                    :data-vv-name=\"name\"\r\n                                    data-vv-delay=\"-1\"\r\n                                    :data-vv-scope=\"scope || dataVvScope\"\r\n                                    @click=\"toggle()\"\r\n                                    :data-off-text=\"offLabel\" data-on-color=\"#6FC04A\"\r\n                                    data-off-color=\"default\" :checked=\"checked ? 'checked' : ''\">\r\n                            </div>\r\n                    </div>\r\n                    <span :style=\"getLabelStyle()\">\r\n                        {{ label }}\r\n                    </span>\r\n                </label>\r\n            </div>\r\n            <div v-else-if=\"inputStyle == 'switchery'\">\r\n                <div class=\"checkbox checkbox-cdg checkbox-switchery\" :class=\"getSwitcheryCheckboxClass()\">\r\n                    <label :style=\"getSwitcheryLabelStyle()\">\r\n                        <span class=\"text\">\r\n                            {{ switcheryOptions.multipleLabel? (switcheryOptions.label[0] || '') :  '' }}\r\n                        </span>\r\n                        <input type=\"checkbox\"\r\n                            class=\"switchery\"\r\n                            :name=\"name\"\r\n                            :disabled=\"disabled\"\r\n                            :data-on-text=\"onLabel\"\r\n                            :v-validate=\"validationRule || vValidate\"\r\n                            :data-vv-name=\"name\"\r\n                            data-vv-delay=\"-1\"\r\n                            :data-vv-scope=\"scope || dataVvScope\"\r\n                            @click=\"toggle()\"\r\n                            checked=\"checked\" data-switchery=\"true\"\r\n                            style=\"display: none;\">\r\n\r\n                        <span class=\"switchery switchery-default\" :style=\"getSwitcheryStyle()\">\r\n                            <small :style=\"getSwitcheryComponentStyle()\"></small>\r\n                        </span>\r\n                        <span class=\"text\">\r\n                        {{ switcheryOptions.multipleLabel? (switcheryOptions.label[1] || '') :\r\n                            (switcheryOptions.label[0] || '') }}\r\n                        </span>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            `,\r\n    props: {\r\n        width: {\r\n            default() {\r\n                return 41;\r\n            }\r\n        },\r\n        active: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        id: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        label: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        onLabel: {\r\n            default() {\r\n                return 'On'\r\n            }\r\n        },\r\n        offLabel: {\r\n            default() {\r\n                return 'Off'\r\n            }\r\n        },\r\n        image: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        disabled: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        name: {\r\n            default() {\r\n                return 'toggleButton'\r\n            }\r\n        },\r\n        scope: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        value: {\r\n            default() {\r\n                return false;\r\n            }\r\n        },\r\n        validationRule: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        vValidate: {\r\n            type: 'String',\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        dataVvScope: {\r\n            default() {\r\n                return '';\r\n            }\r\n        },\r\n        inputStyle: {\r\n            default() {\r\n                //options: basic, switchery\r\n                return 'basic'\r\n            }\r\n        },\r\n        passData: {\r\n            default() {\r\n                return null;\r\n            }\r\n        },\r\n        switchery: {\r\n            default() {\r\n                return {\r\n                    position: 'left',\r\n                    label: ['Switch'],\r\n                    size: 'large',\r\n                    multipleLabel: false,\r\n                    alignRight: false,\r\n                }\r\n            }\r\n        }\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            checked: false,\r\n            switcheryOptions: {\r\n                position: 'left',\r\n                label: ['Switch'],\r\n                size: 'large',\r\n                multipleLabel: false,\r\n                alignRight: false,\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n        this.switcheryOptions = { ...this.switcheryOptions, ...this.switchery };\r\n        this.checked = this.value;\r\n    },\r\n    mounted() {\r\n    },\r\n    methods: {\r\n        getSwitcheryLabelStyle() {\r\n            if (this.switcheryOptions.position == 'right' && this.switcheryOptions.alignRight) {\r\n                return `display: block; text-align: right`;\r\n            }\r\n        },\r\n        getSwitcheryCheckboxClass() {\r\n            let className = '';\r\n            switch (this.switcheryOptions.size) {\r\n                case 'large':\r\n                    className = `${className} switchery-lg`;\r\n                    break;\r\n                case 'medium':\r\n                    className = `${className} switchery-md`;\r\n                    break;\r\n                case 'small':\r\n                    className = `${className} switchery-sm`;\r\n                    break;\r\n                case 'mini':\r\n                    className = `${className} switchery-xs`;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            if (this.switcheryOptions.position == 'right') {\r\n                className = `${className} checkbox-right`;\r\n            }\r\n            if (this.switcheryOptions.multipleLabel) {\r\n                className = `${className} checkbox-double`;\r\n            }\r\n            return className;\r\n        },\r\n        getSwitcheryComponentStyle() {\r\n            if (this.checked) {\r\n                return `left: 26px;\r\n                        transition: background-color 0.4s ease 0s, left 0.2s ease 0s;\r\n                        background-color: rgb(255, 255, 255);`;\r\n            }\r\n            else {\r\n                return `left: 0px;\r\n                        transition: background-color 0.4s ease 0s, left 0.2s ease 0s;`;\r\n            }\r\n        },\r\n        getSwitcheryStyle() {\r\n            if (this.checked) {\r\n                return `background-color: rgb(100, 189, 99);\r\n                        border-color: rgb(100, 189, 99);\r\n                        box-shadow: rgb(100, 189, 99) 0px 0px 0px 14px inset;\r\n                        transition: border 0.4s ease 0s, box-shadow 0.4s ease 0s, background-color 1.2s ease 0s;`;\r\n            }\r\n            else {\r\n                return `background-color: rgb(255, 255, 255);\r\n                        border-color: rgb(223, 223, 223);\r\n                        box-shadow: rgb(223, 223, 223) 0px 0px 0px 0px inset;\r\n                        transition: border 0.4s ease 0s, box-shadow 0.4s ease 0s;`\r\n            }\r\n        },\r\n        getSwitchContainerStyle() {\r\n            if (this.checked) {\r\n                return `width: ${(this.width + 1.5) * 3}px; margin-left: 0px;`;\r\n            }\r\n            else {\r\n                return `width: ${(this.width + 1.5) * 3}px; margin-left: -${this.width}px;`;\r\n            }\r\n        },\r\n        getSwitchInputStyle(noMargin, inputName) {\r\n            if (noMargin) {\r\n                return `width: ${this.width}px;`;\r\n            }\r\n            else {\r\n                if (this.checked && inputName == 'off') {\r\n                    return `width: ${this.width}px; margin-left: 0px;`;\r\n                }\r\n                else {\r\n                    return `width: ${this.width}px; margin-left: -3px;`;\r\n                }\r\n            }\r\n        },\r\n        getLabelStyle() {\r\n            if (this.label.length < 10) {\r\n\r\n            }\r\n        },\r\n        getWrapperStyle() {\r\n            return `width: ${((this.width + 1) * 2) || 0}px; overflow: hidden; display: inline-block; `;\r\n        },\r\n        getWrapperClass() {\r\n            let className = '';\r\n            className = this.disabled ? 'bootstrap-switch-disabled' : '';\r\n            if (this.checked) {\r\n                className = `${className} bootstrap-switch-on`\r\n            }\r\n            else {\r\n                className = `${className} bootstrap-switch-off`;\r\n            }\r\n            return className;\r\n        },\r\n        toggle() {\r\n            this.checked = !this.checked;\r\n        }\r\n    },\r\n    watch: {\r\n        value(val) {\r\n            this.checked = val;\r\n        },\r\n        checked(value) {\r\n            if (!this.passData) {\r\n                this.$emit('click', value);\r\n                this.$emit('change', value);\r\n                this.$emit('input', value);\r\n            }\r\n            else {\r\n                this.$emit('click', value, this.passData);\r\n                this.$emit('change', value, this.passData);\r\n                this.$emit('input', value, this.passData);\r\n            }\r\n        }\r\n    },\r\n});\r\n\r\nVue.component('errorText', {\r\n    template: ` <div v-show=\"text\">\r\n        <i class=\"fa fa-warning help is-danger\"></i>\r\n        <span class=\"help is-danger\" v-text=\"text\">\r\n        </span>\r\n    </div>`,\r\n    props: {\r\n        text: {\r\n            default() {\r\n                return ''; \r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n    },\r\n    methods: {\r\n\r\n    },\r\n    watch: {\r\n        text(val) {\r\n        }\r\n    }\r\n})",
          "comment" : ""
        },
        "redirectURL" : "",
        "headersSize" : 281,
        "bodySize" : 198804,
        "comment" : ""
      },
      "cache" : { },
      "timings" : {
        "comment" : "",
        "connect" : 352,
        "ssl" : -1,
        "dns" : -1,
        "wait" : 0,
        "send" : 0,
        "receive" : 0,
        "blocked" : -1
      },
      "comment" : "",
      "_katalonRequestInformation" : {
        "name" : "33",
        "testObjectId" : "Temporary RESTful request object",
        "harId" : "480e39be-102f-4391-b22a-1f622b583fe7",
        "reportFolder" : null
      },
      "time" : 352
    } ],
    "comment" : ""
  }
}